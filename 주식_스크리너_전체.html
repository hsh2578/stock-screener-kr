<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Í∏∞Ïà†Ï†Å Î∂ÑÏÑù Í∏∞Î∞ò Íµ≠ÎÇ¥ Ï£ºÏãù Ïä§ÌÅ¨Î¶¨Îãù ÎèÑÍµ¨ - Î∞ïÏä§Í∂å, ÎèåÌåå, Í±∞ÎûòÎüâ Î∂ÑÏÑù">
    <title>Íµ≠ÎÇ¥ Ï£ºÏãù Ï¢ÖÎ™© Î∞úÍµ¥ - Stock Screener</title>
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">
    <!-- Pretendard Ìè∞Ìä∏ (ÎÑ§Ïù¥Î≤Ñ, Ïπ¥Ïπ¥Ïò§, ÌÜ†Ïä§ÏóêÏÑú ÏÇ¨Ïö©ÌïòÎäî ÌòÑÎåÄÏ†ÅÏù∏ ÌïúÍ∏Ä Ìè∞Ìä∏) -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        /* ============================================================
           MODERN FINANCIAL SCREENER - Professional UI/UX Design
           Inspired by Naver Finance & Yahoo Finance
           ============================================================ */

        :root {
            /* Light Theme Colors - Professional Financial Style */
            --color-bg-primary: #FFFFFF;
            --color-bg-secondary: #F8F9FA;
            --color-bg-tertiary: #EBEEF3;
            --color-bg-hover: #F0F2F5;
            --color-text-primary: #1E2329;
            --color-text-secondary: #4A5568; /* ÎåÄÎπÑ Í∞úÏÑ†: 4.5:1 Ïù¥ÏÉÅ */
            --color-text-muted: #718096; /* ÎåÄÎπÑ Í∞úÏÑ†: 4.5:1 Ïù¥ÏÉÅ */
            --color-accent: #0066CC;
            --color-accent-hover: #004499;
            --color-accent-light: #E8F1FA;
            --color-success: #E31B1B;  /* ÌïúÍµ≠Ïãù: ÏÉÅÏäπ Îπ®Í∞ï */
            --color-success-bg: rgba(227, 27, 27, 0.08);
            --color-danger: #1261C4;   /* ÌïúÍµ≠Ïãù: ÌïòÎùΩ ÌååÎûë */
            --color-danger-bg: rgba(18, 97, 196, 0.08);
            --color-warning: #F59E0B;
            --color-warning-bg: rgba(245, 158, 11, 0.08);
            --color-border: #E5E8EB;
            --color-border-dark: #D1D5DB;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background-color: var(--color-bg-secondary);
            color: var(--color-text-primary);
            min-height: 100vh;
            line-height: 1.6;
            font-size: 15px;
            font-weight: 500;
            -webkit-font-smoothing: antialiased;
            letter-spacing: -0.01em;
        }

        a { color: var(--color-accent); text-decoration: none; transition: color 0.15s; }
        a:hover { color: var(--color-accent-hover); }

        /* ============================================================
           GLOBAL HEADER
           ============================================================ */
        .global-header {
            background: var(--color-bg-primary);
            border-bottom: 1px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 56px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 18px;
            color: var(--color-text-primary);
            cursor: pointer;
        }
        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--color-accent) 0%, #0052A3 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }
        .header-meta {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 13px;
            color: var(--color-text-muted);
        }
        .update-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--color-bg-tertiary);
            border-radius: 20px;
            font-size: 12px;
        }
        .update-badge::before {
            content: '';
            width: 6px;
            height: 6px;
            background: #22C55E;
            border-radius: 50%;
        }

        /* ============================================================
           CARD SYSTEM
           ============================================================ */
        .card {
            background-color: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            transition: all 0.2s ease;
        }
        .card:hover {
            border-color: var(--color-border-dark);
            box-shadow: var(--shadow-md);
        }

        /* ============================================================
           BADGE SYSTEM
           ============================================================ */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.02em;
        }
        .badge-success { background-color: var(--color-success-bg); color: var(--color-success); }
        .badge-warning { background-color: var(--color-warning-bg); color: #B45309; }
        .badge-danger { background-color: var(--color-danger-bg); color: var(--color-danger); }
        .badge-info { background-color: var(--color-accent-light); color: var(--color-accent); }

        /* ============================================================
           LAYOUT
           ============================================================ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
            min-height: calc(100vh - 56px);
        }

        /* ============================================================
           HOME PAGE
           ============================================================ */
        .home-header {
            margin-bottom: 40px;
            text-align: center;
            padding: 48px 24px;
            background: linear-gradient(135deg, #F8FAFC 0%, #EEF2F6 100%);
            border-radius: var(--radius-lg);
            border: 1px solid var(--color-border);
        }
        .home-header h1 {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 12px;
            color: var(--color-text-primary);
            letter-spacing: -0.5px;
        }
        @media (min-width: 768px) { .home-header h1 { font-size: 36px; } }
        .home-header .subtitle {
            font-size: 16px;
            margin-bottom: 8px;
            color: var(--color-text-secondary);
            font-weight: 400;
        }
        .home-header .meta {
            font-size: 13px;
            color: var(--color-text-muted);
        }

        /* ============================================================
           SCREENER CARD GRID
           ============================================================ */
        .card-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }
        @media (min-width: 640px) { .card-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .card-grid { grid-template-columns: repeat(3, 1fr); gap: 20px; } }

        .screener-card {
            display: block;
            padding: 20px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .screener-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--color-accent);
            opacity: 0;
            transition: opacity 0.2s;
        }
        .screener-card:hover::before { opacity: 1; }
        .screener-card:hover { transform: translateY(-2px); }
        .screener-card .content { display: flex; align-items: flex-start; gap: 14px; }
        .screener-card .icon {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            background: var(--color-bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }
        .screener-card .info { flex: 1; min-width: 0; }
        .screener-card .title-row { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; flex-wrap: wrap; }
        .screener-card h2 { font-size: 15px; font-weight: 700; color: var(--color-text-primary); }
        .screener-card .desc { font-size: 13px; color: var(--color-text-secondary); line-height: 1.5; }
        .screener-card .stock-count {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--color-border);
            font-size: 13px;
            color: var(--color-text-muted);
        }
        .screener-card .stock-count strong {
            color: var(--color-accent);
            font-weight: 700;
        }

        /* ============================================================
           FOOTER
           ============================================================ */
        .home-footer {
            margin-top: 48px;
            text-align: center;
            padding: 24px;
            background: var(--color-bg-primary);
            border-radius: var(--radius-md);
            border: 1px solid var(--color-border);
        }
        .home-footer p { font-size: 13px; color: var(--color-text-secondary); }
        .home-footer .disclaimer { font-size: 12px; margin-top: 8px; color: var(--color-text-muted); }

        /* ============================================================
           PAGE HEADER & NAVIGATION
           ============================================================ */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 20px;
            font-size: 13px;
            font-weight: 500;
            color: var(--color-text-secondary);
            padding: 8px 14px;
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            transition: all 0.15s;
        }
        .back-link:hover {
            background: var(--color-bg-tertiary);
            color: var(--color-text-primary);
        }

        .page-header {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        .page-header .title-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }
        .page-header .icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--color-accent-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        .page-header h1 {
            font-size: 22px;
            font-weight: 700;
            color: var(--color-text-primary);
            letter-spacing: -0.3px;
        }
        .page-header .desc {
            color: var(--color-text-secondary);
            font-size: 14px;
            margin-top: 4px;
        }
        .page-header .meta {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--color-border);
            font-size: 13px;
        }
        .page-header .meta .date { color: var(--color-text-muted); }
        .page-header .meta .count {
            font-weight: 700;
            color: var(--color-accent);
        }
        .page-header .meta .total { color: var(--color-text-muted); }

        /* ============================================================
           DATA TABLE - Naver Finance Style
           ============================================================ */
        .table-card {
            overflow: hidden;
            border-radius: var(--radius-md);
        }
        .table-card:hover { transform: none; box-shadow: var(--shadow-sm); }
        .table-wrapper { overflow-x: auto; }

        table { width: 100%; border-collapse: collapse; }

        th {
            background-color: var(--color-bg-tertiary);
            padding: 14px 14px;
            text-align: left;
            font-weight: 700;
            font-size: 13px;
            color: var(--color-text-primary);
            border-bottom: 2px solid var(--color-border-dark);
            white-space: nowrap;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.15s;
        }
        th:hover { background-color: #DDE1E6; }
        th:first-child { padding-left: 20px; }
        th:last-child { padding-right: 20px; }

        td {
            padding: 14px;
            border-bottom: 1px solid var(--color-border);
            font-size: 14px;
            font-weight: 500;
            color: var(--color-text-primary);
        }
        td:first-child { padding-left: 20px; }
        td:last-child { padding-right: 20px; }

        /* Ï§ÑÎ¨¥Îä¨ (Zebra striping) - ÎÑ§Ïù¥Î≤Ñ Í∏àÏúµ Ïä§ÌÉÄÏùº */
        tbody tr:nth-child(even) { background-color: var(--color-bg-secondary); }
        tbody tr:nth-child(odd) { background-color: var(--color-bg-primary); }
        tbody tr:hover { background-color: #EDF4FC !important; }

        .text-right { text-align: right; font-variant-numeric: tabular-nums; }
        .text-center { text-align: center; }

        .stock-name {
            font-weight: 700;
            font-size: 14px;
            color: var(--color-text-primary);
            display: block;
        }
        .stock-ticker {
            font-size: 11px;
            color: var(--color-text-muted);
            font-weight: 400;
            font-variant-numeric: tabular-nums;
            letter-spacing: 0.02em;
        }

        /* ÏÉÅÏäπ/ÌïòÎùΩ ÏÉâÏÉÅ - ÌïúÍµ≠Ïãù */
        .positive { color: var(--color-success); font-weight: 700; }
        .negative { color: var(--color-danger); font-weight: 700; }
        .neutral { color: var(--color-text-secondary); font-weight: 500; }

        /* Í∞ÄÍ≤© ÏÖÄ Ïä§ÌÉÄÏùº - PretendardÏùò tabular numbers ÏÇ¨Ïö© */
        .price-cell {
            font-variant-numeric: tabular-nums;
            font-weight: 600;
        }
        .change-cell {
            font-variant-numeric: tabular-nums;
            font-weight: 700;
        }

        /* ============================================================
           SECTOR STAGE SECTION
           ============================================================ */
        .stage-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }
        @media (min-width: 768px) { .stage-grid { grid-template-columns: repeat(4, 1fr); } }

        .stage-info {
            padding: 16px;
            text-align: center;
            background: var(--color-bg-primary);
        }
        .stage-info:hover { transform: none; }
        .stage-info .emoji { font-size: 24px; margin-bottom: 8px; }
        .stage-info .name { font-weight: 700; font-size: 14px; }
        .stage-info .sub { font-size: 12px; color: var(--color-text-muted); margin-top: 4px; }

        .sector-section { margin-bottom: 24px; }
        .sector-section h2 {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--color-text-primary);
        }
        .sector-section .section-badge {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 4px;
            font-weight: 600;
        }
        .sector-cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        @media (min-width: 640px) { .sector-cards { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .sector-cards { grid-template-columns: repeat(3, 1fr); } }
        @media (min-width: 1280px) { .sector-cards { grid-template-columns: repeat(4, 1fr); } }

        .sector-card {
            padding: 16px;
            transition: all 0.2s;
            background: var(--color-bg-primary);
        }
        .sector-card:hover { transform: translateY(-2px); }
        .sector-card .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .sector-card .sector-name { font-weight: 700; color: var(--color-text-primary); font-size: 14px; }
        .sector-card .stage-badge { display: flex; align-items: center; gap: 4px; }
        .sector-card .stage-badge .emoji { font-size: 16px; }
        .sector-card .stage-badge .name { font-size: 12px; font-weight: 600; }
        .sector-card .metrics { font-size: 13px; }
        .sector-card .metric { display: flex; justify-content: space-between; margin-bottom: 6px; }
        .sector-card .metric-label { color: var(--color-text-muted); }
        .sector-card .overheated {
            margin-top: 12px;
            padding: 6px 10px;
            border-radius: 4px;
            font-size: 11px;
            text-align: center;
            font-weight: 600;
            background-color: var(--color-success-bg);
            color: var(--color-success);
        }

        /* Stage colors */
        .stage-1 { color: var(--color-text-secondary); }
        .stage-2 { color: #16A34A; }
        .stage-3 { color: var(--color-warning); }
        .stage-4 { color: var(--color-danger); }
        .stage-1-bg { background-color: rgba(156, 163, 175, 0.1); border-color: rgba(156, 163, 175, 0.3); }
        .stage-2-bg { background-color: rgba(22, 163, 74, 0.1); border-color: rgba(22, 163, 74, 0.3); }
        .stage-3-bg { background-color: rgba(245, 158, 11, 0.1); border-color: rgba(245, 158, 11, 0.3); }
        .stage-4-bg { background-color: rgba(18, 97, 196, 0.1); border-color: rgba(18, 97, 196, 0.3); }

        /* ============================================================
           PAGE VISIBILITY
           ============================================================ */
        .page { display: none; }
        .page.active { display: block; }

        /* ============================================================
           SORT ICONS
           ============================================================ */
        th .sort-icon {
            margin-left: 4px;
            opacity: 0.3;
            font-size: 10px;
            transition: opacity 0.15s;
        }
        th:hover .sort-icon { opacity: 0.6; }
        th.sorted .sort-icon { opacity: 1; color: var(--color-accent); }

        /* ============================================================
           ACCESSIBILITY - WCAG 2.1 AA Ï§ÄÏàò
           ============================================================ */
        /* Ìè¨Ïª§Ïä§ Ïù∏ÎîîÏºÄÏù¥ÌÑ∞ Í∞ïÌôî */
        *:focus {
            outline: 2px solid var(--color-accent);
            outline-offset: 2px;
        }

        /* Ïä§ÌÇµ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÎßÅÌÅ¨ */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--color-accent);
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            z-index: 10000;
            border-radius: 0 0 4px 0;
        }
        .skip-link:focus {
            top: 0;
        }

        /* Ïä§ÌÅ¨Î¶∞Î¶¨Îçî Ï†ÑÏö© ÌÖçÏä§Ìä∏ */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* ============================================================
           BREADCRUMB NAVIGATION
           ============================================================ */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
            font-size: 13px;
            color: var(--color-text-muted);
            flex-wrap: wrap;
        }
        .breadcrumb a {
            color: var(--color-text-secondary);
            text-decoration: none;
            transition: color 0.15s;
        }
        .breadcrumb a:hover {
            color: var(--color-accent);
        }
        .breadcrumb .separator {
            color: var(--color-border-dark);
        }
        .breadcrumb .current {
            color: var(--color-text-primary);
            font-weight: 600;
        }

        /* ============================================================
           TOAST NOTIFICATION
           ============================================================ */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: 16px 20px;
            box-shadow: var(--shadow-lg);
            z-index: 10001;
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 280px;
            max-width: 400px;
            animation: slideInUp 0.3s ease-out;
            opacity: 0;
        }
        .toast.show {
            opacity: 1;
        }
        .toast.hide {
            animation: slideOutDown 0.3s ease-out forwards;
        }
        .toast-icon {
            font-size: 20px;
            flex-shrink: 0;
        }
        .toast-content {
            flex: 1;
        }
        .toast-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }
        .toast-message {
            font-size: 13px;
            color: var(--color-text-secondary);
        }
        .toast-close {
            background: none;
            border: none;
            color: var(--color-text-muted);
            cursor: pointer;
            font-size: 20px;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: background 0.15s;
        }
        .toast-close:hover {
            background: var(--color-bg-tertiary);
        }

        @keyframes slideInUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideOutDown {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(100px);
                opacity: 0;
            }
        }

        /* ============================================================
           MOBILE CARD VIEW FOR TABLES
           ============================================================ */
        @media (max-width: 768px) {
            .table-wrapper {
                display: none;
            }
            .mobile-card-list {
                display: block;
            }
            .stock-card-mobile {
                background: var(--color-bg-primary);
                border: 1px solid var(--color-border);
                border-radius: var(--radius-md);
                padding: 16px;
                margin-bottom: 12px;
                cursor: pointer;
                transition: all 0.15s;
            }
            .stock-card-mobile:active {
                transform: scale(0.98);
                background: var(--color-bg-secondary);
            }
            .stock-card-mobile .header-row {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 12px;
            }
            .stock-card-mobile .stock-info h3 {
                font-size: 15px;
                font-weight: 700;
                margin-bottom: 4px;
            }
            .stock-card-mobile .stock-info .ticker {
                font-size: 12px;
                color: var(--color-text-muted);
            }
            .stock-card-mobile .price-info {
                text-align: right;
            }
            .stock-card-mobile .price {
                font-size: 16px;
                font-weight: 700;
                margin-bottom: 4px;
            }
            .stock-card-mobile .details {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding-top: 12px;
                border-top: 1px solid var(--color-border);
            }
            .stock-card-mobile .detail-item {
                font-size: 12px;
            }
            .stock-card-mobile .detail-label {
                color: var(--color-text-muted);
                margin-bottom: 2px;
            }
            .stock-card-mobile .detail-value {
                font-weight: 600;
                color: var(--color-text-primary);
            }
        }

        @media (min-width: 769px) {
            .mobile-card-list {
                display: none;
            }
        }

        /* ============================================================
           ENHANCED LOADING STATE
           ============================================================ */
        .skeleton {
            background: linear-gradient(90deg,
                var(--color-bg-tertiary) 0%,
                var(--color-bg-secondary) 50%,
                var(--color-bg-tertiary) 100%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s ease-in-out infinite;
            border-radius: 4px;
        }

        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* ============================================================
           FILTER RESULT BADGE
           ============================================================ */
        .filter-result {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--color-accent-light);
            color: var(--color-accent);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            animation: fadeInScale 0.3s ease-out;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* ============================================================
           CLICKABLE ROWS
           ============================================================ */
        tr.clickable { cursor: pointer; }
        tr.clickable:hover { background-color: #EDF4FC !important; }

        /* ============================================================
           CHART MODAL
           ============================================================ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-overlay.active { display: flex; }
        .modal-content {
            background-color: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 960px;
            max-height: 90vh;
            overflow: hidden;
            animation: modalSlideIn 0.25s ease-out;
            box-shadow: var(--shadow-lg);
        }
        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 20px 24px;
            border-bottom: 1px solid var(--color-border);
            background: var(--color-bg-secondary);
        }
        .modal-stock-info h2 {
            font-size: 18px;
            font-weight: 700;
            color: var(--color-text-primary);
        }
        .modal-stock-info .ticker {
            font-size: 13px;
            color: var(--color-text-muted);
            margin-left: 8px;
            font-weight: 400;
        }
        .modal-stock-info .price-row {
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .modal-stock-info .price {
            font-size: 20px;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
        }
        .modal-close {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            width: 36px; height: 36px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.15s;
        }
        .modal-close:hover {
            background: var(--color-bg-tertiary);
            color: var(--color-text-primary);
        }
        .modal-body { padding: 20px 24px; }
        .chart-container {
            background: #FAFBFC;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            height: 420px;
            position: relative;
        }
        .chart-loading {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: var(--color-text-muted);
            font-size: 14px;
        }
        .chart-legend {
            display: flex;
            gap: 20px;
            margin-top: 12px;
            font-size: 12px;
            color: var(--color-text-secondary);
            justify-content: center;
        }
        .chart-legend span {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .modal-footer {
            display: flex;
            justify-content: space-between;
            padding: 14px 24px;
            border-top: 1px solid var(--color-border);
            font-size: 12px;
            color: var(--color-text-muted);
            background: var(--color-bg-secondary);
        }

        /* ============================================================
           SCROLLBAR
           ============================================================ */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--color-bg-secondary); }
        ::-webkit-scrollbar-thumb { background: var(--color-border-dark); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #B0B8C1; }

        /* ============================================================
           FILTER BUTTON
           ============================================================ */
        .filter-row {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }
        .filter-btn {
            padding: 8px 16px;
            border-radius: var(--radius-sm);
            border: 2px solid var(--color-border); /* ÎëêÍªò Ï¶ùÍ∞ÄÎ°ú Í∞ÄÏãúÏÑ± Ìñ•ÏÉÅ */
            background-color: var(--color-bg-primary);
            color: var(--color-text-secondary);
            font-size: 13px;
            font-weight: 600; /* Í∞ÄÏ§ëÏπò Ï¶ùÍ∞Ä */
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            min-height: 40px;
            position: relative;
        }
        .filter-btn::before {
            content: '';
            width: 16px;
            height: 16px;
            border: 2px solid var(--color-border-dark);
            border-radius: 4px;
            transition: all 0.2s;
            flex-shrink: 0;
        }
        .filter-btn:hover {
            background-color: var(--color-bg-tertiary);
            border-color: var(--color-accent);
            transform: translateY(-1px);
        }
        .filter-btn:focus {
            outline: 2px solid var(--color-accent);
            outline-offset: 2px;
        }
        .filter-btn.active {
            background-color: var(--color-accent-light);
            border-color: var(--color-accent);
            color: var(--color-accent);
            font-weight: 700;
        }
        .filter-btn.active::before {
            background-color: var(--color-accent);
            border-color: var(--color-accent);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z'/%3E%3C/svg%3E");
            background-size: 12px;
            background-repeat: no-repeat;
            background-position: center;
        }
        .filter-btn.active::after {
            content: 'Ï†ÅÏö©Îê®';
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--color-accent);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 600;
        }

        /* ============================================================
           PAGINATION - Yahoo Finance Style
           ============================================================ */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
            margin-top: 20px;
            padding: 16px;
            background: var(--color-bg-secondary);
            border-top: 1px solid var(--color-border);
            flex-wrap: wrap;
        }
        .pagination-btn {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            padding: 8px 12px;
            min-width: 36px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.15s;
        }
        .pagination-btn:hover:not(:disabled) {
            background: var(--color-bg-tertiary);
            border-color: var(--color-border-dark);
            color: var(--color-text-primary);
        }
        .pagination-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .pagination-btn.active {
            background: var(--color-accent);
            border-color: var(--color-accent);
            color: white;
        }
        .pagination-info {
            color: var(--color-text-muted);
            font-size: 13px;
            margin: 0 12px;
        }
        .pagination-nav {
            display: flex;
            gap: 4px;
        }

        /* ============================================================
           RESPONSIVE DESIGN
           ============================================================ */
        @media (max-width: 768px) {
            .header-content { padding: 0 16px; height: 52px; }
            .logo {
                font-size: 16px;
                min-height: 44px; /* ÌÑ∞Ïπò ÌÉÄÍ≤ü ÏµúÏÜå ÌÅ¨Í∏∞ Î≥¥Ïû• */
            }
            .header-meta { display: none; }
            .container { padding: 16px; }
            .page-header { padding: 16px; }
            .page-header h1 { font-size: 18px; }
            th, td { padding: 10px 8px; font-size: 13px; }
            .screener-card {
                padding: 16px;
                min-height: 120px; /* ÌÑ∞Ïπò ÌÉÄÍ≤ü ÌÅ¨Í∏∞ */
            }
            .home-header { padding: 32px 16px; }
            .home-header h1 { font-size: 24px; }

            /* ÌÑ∞Ïπò ÌÉÄÍ≤ü ÌÅ¨Í∏∞ Í∞úÏÑ† */
            .back-link {
                min-height: 44px;
                padding: 12px 16px;
            }
            .filter-btn {
                min-height: 44px;
                padding: 12px 18px;
            }
            .pagination-btn {
                min-width: 44px;
                min-height: 44px;
            }
            .modal-close {
                width: 44px;
                height: 44px;
            }
        }

        /* ============================================================
           UTILITY CLASSES
           ============================================================ */
        .nowrap { white-space: nowrap; }
        .font-mono { font-variant-numeric: tabular-nums; letter-spacing: 0.02em; }
    </style>
</head>
<body>
    <!-- Ï†ëÍ∑ºÏÑ±: Ïä§ÌÇµ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
    <a href="#main-content" class="skip-link">Î≥∏Î¨∏ÏúºÎ°ú Í±¥ÎÑàÎõ∞Í∏∞</a>

    <!-- Global Header -->
    <header class="global-header" role="banner">
        <div class="header-content">
            <button class="logo" onclick="showPage('home')" aria-label="ÌôàÏúºÎ°ú Ïù¥Îèô" style="background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:10px;font-weight:700;font-size:18px;color:var(--color-text-primary);">
                <div class="logo-icon" aria-hidden="true">S</div>
                <span>Stock Screener</span>
            </button>
            <div class="header-meta" aria-live="polite">
                <div class="update-badge">
                    <span class="sr-only">Îç∞Ïù¥ÌÑ∞ ÏÉÅÌÉú:</span>
                    Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞
                </div>
                <span>KRX Í∏∞Ï§Ä</span>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <div id="page-home" class="page active">
        <div class="container" id="main-content">
            <header class="home-header">
                <h1>Íµ≠ÎÇ¥ Ï£ºÏãù Ï¢ÖÎ™© Î∞úÍµ¥</h1>
                <p class="subtitle">Í∏∞Ïà†Ï†Å Î∂ÑÏÑù Í∏∞Î∞ò Íµ≠ÎÇ¥ Ï£ºÏãù Ïä§ÌÅ¨Î¶¨Îãù</p>
                <p class="meta">ÏãúÍ∞ÄÏ¥ùÏï° 1,000Ïñµ Ïù¥ÏÉÅ ¬∑ 1,500+ Ï¢ÖÎ™© Î∂ÑÏÑù</p>
            </header>
            <main class="card-grid" id="home-cards" role="main" aria-label="Ïä§ÌÅ¨Î¶¨ÎÑà Î™©Î°ù"></main>
            <footer class="home-footer" role="contentinfo">
                <p>Îç∞Ïù¥ÌÑ∞ Ï∂úÏ≤ò: KRX (ÌïúÍµ≠Í±∞ÎûòÏÜå) ¬∑ Îß§Ïùº Ïû• ÎßàÍ∞ê ÌõÑ ÏûêÎèô ÏóÖÎç∞Ïù¥Ìä∏</p>
                <p class="disclaimer">Î≥∏ ÏÑúÎπÑÏä§Îäî Ìà¨Ïûê Ï∞∏Í≥†Ïö©Ïù¥Î©∞, Ìà¨Ïûê ÌåêÎã®Ïùò Ï±ÖÏûÑÏùÄ Î≥∏Ïù∏ÏóêÍ≤å ÏûàÏäµÎãàÎã§.</p>
            </footer>
        </div>
    </div>

    <!-- Box Range Page -->
    <div id="page-box-range" class="page">
        <div class="container">
            <!-- Breadcrumb Navigation -->
            <nav class="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="showPage('home'); return false;">Ìôà</a>
                <span class="separator" aria-hidden="true">‚Ä∫</span>
                <span class="current">Î∞ïÏä§Í∂å Ïä§ÌÅ¨Î¶¨ÎÑà</span>
            </nav>

            <a href="#" class="back-link" onclick="showPage('home'); return false;" aria-label="ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞">
                <span aria-hidden="true">‚Üê</span> ÌôàÏúºÎ°ú
            </a>

            <header class="page-header">
                <div class="title-row">
                    <span class="icon" aria-hidden="true">üì¶</span>
                    <h1>Î∞ïÏä§Í∂å Ïä§ÌÅ¨Î¶¨ÎÑà</h1>
                    <span class="badge badge-info">ÌÄÄÌä∏</span>
                </div>
                <p class="desc">60Í±∞ÎûòÏùº ATRÍ∏∞Î∞ò Ìö°Î≥¥ + ÏßÄÏßÄ/Ï†ÄÌï≠ ÌÑ∞Ïπò ÌôïÏù∏ + Ï∂îÏÑ∏ ÌïÑÌÑ∞ + Í±∞ÎûòÎüâ Í∞êÏÜå (7Ï°∞Í±¥)</p>
                <div class="filter-row" style="margin: 12px 0; display: flex; gap: 8px; align-items: center;" role="group" aria-label="ÌïÑÌÑ∞ ÏòµÏÖò">
                    <button id="filter-ma150-btn" class="filter-btn" onclick="toggleMA150Filter()" aria-pressed="false" aria-label="150Ïùº Ïù¥ÎèôÌèâÍ∑†ÏÑ† ÏúÑ Ï¢ÖÎ™©Îßå ÌëúÏãú">
                        <span class="sr-only">ÌïÑÌÑ∞:</span>
                        150ÏùºÏÑ† ÏúÑÎßå
                    </button>
                </div>
                <div class="meta" aria-live="polite">
                    <span class="date" id="box-range-date">Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: -</span>
                    <span><span class="count" id="box-range-count">-</span>Í∞ú Ï¢ÖÎ™© <span class="total" id="box-range-total">/ 1,521Í∞ú Ï§ë</span></span>
                </div>
            </header>
            <div class="card table-card">
                <div class="table-wrapper">
                    <table id="box-range-table" role="table" aria-label="Î∞ïÏä§Í∂å Ï¢ÖÎ™© Î™©Î°ù">
                        <thead></thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div id="box-range-mobile" class="mobile-card-list"></div>
                <div id="box-range-pagination" class="pagination" role="navigation" aria-label="ÌéòÏù¥ÏßÄ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"></div>
            </div>
        </div>
    </div>

    <!-- Box Breakout Page -->
    <div id="page-box-breakout" class="page">
        <div class="container">
            <nav class="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="showPage('home'); return false;">Ìôà</a>
                <span class="separator" aria-hidden="true">‚Ä∫</span>
                <span class="current">Î∞ïÏä§Í∂å ÎèåÌåå (Í±∞ÎûòÎüâ ÎèôÎ∞ò)</span>
            </nav>
            <a href="#" class="back-link" onclick="showPage('home'); return false;" aria-label="ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞">
                <span aria-hidden="true">‚Üê</span> ÌôàÏúºÎ°ú
            </a>
            <header class="page-header">
                <div class="title-row">
                    <span class="icon">üöÄ</span>
                    <h1>Î∞ïÏä§Í∂å ÎèåÌåå (Í±∞ÎûòÎüâ ÎèôÎ∞ò)</h1>
                    <span class="badge badge-success">1Ï∞® Îß§Ïàò</span>
                </div>
                <p class="desc">Í±∞ÎûòÎüâ 2Î∞∞ ÎèôÎ∞ò Ï†ÄÌï≠ÏÑ† ÎèåÌåå</p>
                <div class="filter-row" style="margin: 12px 0; display: flex; gap: 8px; align-items: center;">
                    <button id="filter-ma150-box-breakout" class="filter-btn" onclick="toggleMA150Filter('boxBreakout')">
                        150ÏùºÏÑ† ÏúÑÎßå
                    </button>
                </div>
                <div class="meta">
                    <span class="date" id="box-breakout-date">Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: -</span>
                    <span><span class="count" id="box-breakout-count">-</span>Í∞ú Ï¢ÖÎ™© <span class="total">/ 1,521Í∞ú Ï§ë</span></span>
                </div>
            </header>
            <div class="card table-card">
                <div class="table-wrapper">
                    <table id="box-breakout-table" role="table" aria-label="Î∞ïÏä§Í∂å ÎèåÌåå Ï¢ÖÎ™© Î™©Î°ù"><thead></thead><tbody></tbody></table>
                </div>
                <div id="box-breakout-mobile" class="mobile-card-list"></div>
                <div id="box-breakout-pagination" class="pagination" role="navigation" aria-label="ÌéòÏù¥ÏßÄ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"></div>
            </div>
        </div>
    </div>

    <!-- Box Breakout Simple Page -->
    <div id="page-box-breakout-simple" class="page">
        <div class="container">
            <nav class="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="showPage('home'); return false;">Ìôà</a>
                <span class="separator" aria-hidden="true">‚Ä∫</span>
                <span class="current">Î∞ïÏä§Í∂å ÎèåÌåå (Í±∞ÎûòÎüâ Î¨¥Í¥Ä)</span>
            </nav>
            <a href="#" class="back-link" onclick="showPage('home'); return false;" aria-label="ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞">
                <span aria-hidden="true">‚Üê</span> ÌôàÏúºÎ°ú
            </a>
            <header class="page-header">
                <div class="title-row">
                    <span class="icon">üìà</span>
                    <h1>Î∞ïÏä§Í∂å ÎèåÌåå (Í±∞ÎûòÎüâ Î¨¥Í¥Ä)</h1>
                </div>
                <p class="desc">Í±∞ÎûòÎüâ Î¨¥Í¥Ä ÎèåÌåå ÌõÑ 10Ïùº Ïù¥ÎÇ¥</p>
                <div class="filter-row" style="margin: 12px 0; display: flex; gap: 8px; align-items: center;">
                    <button id="filter-ma150-box-breakout-simple" class="filter-btn" onclick="toggleMA150Filter('boxBreakoutSimple')">
                        150ÏùºÏÑ† ÏúÑÎßå
                    </button>
                </div>
                <div class="meta">
                    <span class="date" id="box-breakout-simple-date">Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: -</span>
                    <span><span class="count" id="box-breakout-simple-count">-</span>Í∞ú Ï¢ÖÎ™© <span class="total">/ 1,521Í∞ú Ï§ë</span></span>
                </div>
            </header>
            <div class="card table-card">
                <div class="table-wrapper">
                    <table id="box-breakout-simple-table" role="table" aria-label="Î∞ïÏä§Í∂å ÎèåÌåå (Í±∞ÎûòÎüâ Î¨¥Í¥Ä) Ï¢ÖÎ™© Î™©Î°ù"><thead></thead><tbody></tbody></table>
                </div>
                <div id="box-breakout-simple-mobile" class="mobile-card-list"></div>
                <div id="box-breakout-simple-pagination" class="pagination" role="navigation" aria-label="ÌéòÏù¥ÏßÄ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"></div>
            </div>
        </div>
    </div>

    <!-- Pullback Page -->
    <div id="page-pullback" class="page">
        <div class="container">
            <nav class="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="showPage('home'); return false;">Ìôà</a>
                <span class="separator" aria-hidden="true">‚Ä∫</span>
                <span class="current">ÌíÄÎ∞± Ïä§ÌÅ¨Î¶¨ÎÑà</span>
            </nav>
            <a href="#" class="back-link" onclick="showPage('home'); return false;" aria-label="ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞">
                <span aria-hidden="true">‚Üê</span> ÌôàÏúºÎ°ú
            </a>
            <header class="page-header">
                <div class="title-row">
                    <span class="icon">üéØ</span>
                    <h1>ÌíÄÎ∞± Ïä§ÌÅ¨Î¶¨ÎÑà</h1>
                    <span class="badge badge-success">2Ï∞® Îß§Ïàò</span>
                </div>
                <p class="desc">ÎèåÌåå ÌõÑ Ï†ÄÌï≠ÏÑ† ¬±5% Ïù¥ÎÇ¥ ÎêòÎèåÎ¶º Ï¢ÖÎ™©</p>
                <div class="filter-row" style="margin: 12px 0; display: flex; gap: 8px; align-items: center;">
                    <button id="filter-ma150-pullback" class="filter-btn" onclick="toggleMA150Filter('pullback')">
                        150ÏùºÏÑ† ÏúÑÎßå
                    </button>
                </div>
                <div class="meta">
                    <span class="date" id="pullback-date">Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: -</span>
                    <span><span class="count" id="pullback-count">-</span>Í∞ú Ï¢ÖÎ™© <span class="total">/ 1,521Í∞ú Ï§ë</span></span>
                </div>
            </header>
            <div class="card table-card">
                <div class="table-wrapper">
                    <table id="pullback-table" role="table" aria-label="ÌíÄÎ∞± Ï¢ÖÎ™© Î™©Î°ù"><thead></thead><tbody></tbody></table>
                </div>
                <div id="pullback-mobile" class="mobile-card-list"></div>
                <div id="pullback-pagination" class="pagination" role="navigation" aria-label="ÌéòÏù¥ÏßÄ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"></div>
            </div>
        </div>
    </div>

    <!-- Volume Dry Up Page -->
    <div id="page-volume-dry-up" class="page">
        <div class="container">
            <nav class="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="showPage('home'); return false;">Ìôà</a>
                <span class="separator" aria-hidden="true">‚Ä∫</span>
                <span class="current">Í±∞ÎûòÎüâ Í∏âÍ∞ê ÎàåÎ¶ºÎ™©</span>
            </nav>
            <a href="#" class="back-link" onclick="showPage('home'); return false;" aria-label="ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞">
                <span aria-hidden="true">‚Üê</span> ÌôàÏúºÎ°ú
            </a>
            <header class="page-header">
                <div class="title-row">
                    <span class="icon">üèúÔ∏è</span>
                    <h1>Í±∞ÎûòÎüâ Í∏âÍ∞ê ÎàåÎ¶ºÎ™©</h1>
                    <span class="badge badge-warning">ÏÑ∏Î†• Î≥¥Ïú†</span>
                </div>
                <p class="desc">20Ïùº ÌèâÍ∑† 3Î∞∞ Í±∞ÎûòÎüâ + 8% Ïû•ÎåÄÏñëÎ¥â ÌõÑ 10Ïùº Ïù¥ÎÇ¥ Í±∞ÎûòÎüâ Í≥†Í∞à</p>
                <div class="filter-row" style="margin: 12px 0; display: flex; gap: 8px; align-items: center;">
                    <button id="filter-ma150-volume-dry-up" class="filter-btn" onclick="toggleMA150Filter('volumeDryUp')">
                        150ÏùºÏÑ† ÏúÑÎßå
                    </button>
                </div>
                <div class="meta">
                    <span class="date" id="volume-dry-up-date">Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: -</span>
                    <span><span class="count" id="volume-dry-up-count">-</span>Í∞ú Ï¢ÖÎ™© <span class="total">/ 1,521Í∞ú Ï§ë</span></span>
                </div>
            </header>
            <div class="card table-card">
                <div class="table-wrapper">
                    <table id="volume-dry-up-table" role="table" aria-label="Í±∞ÎûòÎüâ Í∏âÍ∞ê Ï¢ÖÎ™© Î™©Î°ù"><thead></thead><tbody></tbody></table>
                </div>
                <div id="volume-dry-up-mobile" class="mobile-card-list"></div>
                <div id="volume-dry-up-pagination" class="pagination" role="navigation" aria-label="ÌéòÏù¥ÏßÄ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"></div>
            </div>
        </div>
    </div>

    <!-- Volume Explosion Page -->
    <div id="page-volume-explosion" class="page">
        <div class="container">
            <nav class="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="showPage('home'); return false;">Ìôà</a>
                <span class="separator" aria-hidden="true">‚Ä∫</span>
                <span class="current">Í±∞ÎûòÎüâ Ìè≠Î∞ú</span>
            </nav>
            <a href="#" class="back-link" onclick="showPage('home'); return false;" aria-label="ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞">
                <span aria-hidden="true">‚Üê</span> ÌôàÏúºÎ°ú
            </a>
            <header class="page-header">
                <div class="title-row">
                    <span class="icon">üí•</span>
                    <h1>Í±∞ÎûòÎüâ Ìè≠Î∞ú</h1>
                    <span class="badge badge-danger">ÎãπÏùº</span>
                </div>
                <p class="desc">40Ïùº ÌèâÍ∑† Í±∞ÎûòÎüâ 6Î∞∞ + 6% Ïù¥ÏÉÅ Ïû•ÎåÄÏñëÎ¥â</p>
                <div class="filter-row" style="margin: 12px 0; display: flex; gap: 8px; align-items: center;">
                    <button id="filter-ma150-volume-explosion" class="filter-btn" onclick="toggleMA150Filter('volumeExplosion')">
                        150ÏùºÏÑ† ÏúÑÎßå
                    </button>
                </div>
                <div class="meta">
                    <span class="date" id="volume-explosion-date">Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: -</span>
                    <span><span class="count" id="volume-explosion-count">-</span>Í∞ú Ï¢ÖÎ™© <span class="total">/ 1,521Í∞ú Ï§ë</span></span>
                </div>
            </header>
            <div class="card table-card">
                <div class="table-wrapper">
                    <table id="volume-explosion-table" role="table" aria-label="Í±∞ÎûòÎüâ Ìè≠Î∞ú Ï¢ÖÎ™© Î™©Î°ù"><thead></thead><tbody></tbody></table>
                </div>
                <div id="volume-explosion-mobile" class="mobile-card-list"></div>
                <div id="volume-explosion-pagination" class="pagination" role="navigation" aria-label="ÌéòÏù¥ÏßÄ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"></div>
            </div>
        </div>
    </div>

    <!-- 52-Week High Page -->
    <div id="page-new-high-52w" class="page">
        <div class="container">
            <nav class="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="showPage('home'); return false;">Ìôà</a>
                <span class="separator" aria-hidden="true">‚Ä∫</span>
                <span class="current">52Ï£º Ïã†Í≥†Í∞Ä ÎèåÌåå</span>
            </nav>
            <a href="#" class="back-link" onclick="showPage('home'); return false;" aria-label="ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞">
                <span aria-hidden="true">‚Üê</span> ÌôàÏúºÎ°ú
            </a>
            <header class="page-header">
                <div class="title-row">
                    <span class="icon">üèîÔ∏è</span>
                    <h1>52Ï£º Ïã†Í≥†Í∞Ä ÎèåÌåå</h1>
                    <span class="badge badge-success">Ïã†Í≥†Í∞Ä</span>
                </div>
                <p class="desc">52Ï£º Ïã†Í≥†Í∞Ä ÎèåÌåå ÌõÑ 8Í±∞ÎûòÏùº Ïù¥ÎÇ¥ Ï¢ÖÎ™©</p>
                <div class="meta">
                    <span class="date" id="new-high-52w-date">Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: -</span>
                    <span><span class="count" id="new-high-52w-count">-</span>Í∞ú Ï¢ÖÎ™© <span class="total">/ 1,521Í∞ú Ï§ë</span></span>
                </div>
            </header>
            <div class="card table-card">
                <div class="table-wrapper">
                    <table id="new-high-52w-table" role="table" aria-label="52Ï£º Ïã†Í≥†Í∞Ä ÎèåÌåå Ï¢ÖÎ™© Î™©Î°ù"><thead></thead><tbody></tbody></table>
                </div>
                <div id="new-high-52w-mobile" class="mobile-card-list"></div>
                <div id="new-high-52w-pagination" class="pagination" role="navigation" aria-label="ÌéòÏù¥ÏßÄ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"></div>
            </div>
        </div>
    </div>

    <!-- Sector Stage Page -->
    <div id="page-sector-stage" class="page">
        <div class="container">
            <nav class="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="showPage('home'); return false;">Ìôà</a>
                <span class="separator" aria-hidden="true">‚Ä∫</span>
                <span class="current">ÏóÖÏ¢ÖÎ≥Ñ 4Îã®Í≥Ñ</span>
            </nav>
            <a href="#" class="back-link" onclick="showPage('home'); return false;" aria-label="ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞">
                <span aria-hidden="true">‚Üê</span> ÌôàÏúºÎ°ú
            </a>
            <header class="page-header">
                <div class="title-row">
                    <span class="icon">üè≠</span>
                    <h1>ÏóÖÏ¢ÖÎ≥Ñ 4Îã®Í≥Ñ</h1>
                </div>
                <p class="desc">Weinstein 4Îã®Í≥Ñ ÏóÖÏ¢Ö Î∂ÑÏÑù</p>
                <div class="meta">
                    <span class="date" id="sector-stage-date">Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: -</span>
                    <span><span class="count" id="sector-stage-count">-</span>Í∞ú ÏóÖÏ¢Ö</span>
                </div>
            </header>
            <div class="stage-grid">
                <div class="card stage-info"><div class="emoji">1Ô∏è‚É£</div><div class="name" style="color: var(--color-text-primary)">Í∏∞Ï¥à</div><div class="sub">Ìö°Î≥¥ Íµ¨Í∞Ñ</div></div>
                <div class="card stage-info"><div class="emoji">2Ô∏è‚É£</div><div class="name stage-2">ÏÉÅÏäπ</div><div class="sub">Îß§Ïàò Ï†ÅÍ∏∞</div></div>
                <div class="card stage-info"><div class="emoji">3Ô∏è‚É£</div><div class="name stage-3">ÏµúÏ†ïÏÉÅ</div><div class="sub">Îß§ÎèÑ Ï§ÄÎπÑ</div></div>
                <div class="card stage-info"><div class="emoji">4Ô∏è‚É£</div><div class="name stage-4">Ïá†Ìá¥</div><div class="sub">Îß§ÎèÑ/Í¥ÄÎßù</div></div>
            </div>
            <div id="sector-stage-content"></div>
        </div>
    </div>

    <!-- Value Stocks Page -->
    <div id="page-value-stocks" class="page">
        <div class="container">
            <nav class="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="showPage('home'); return false;">Ìôà</a>
                <span class="separator" aria-hidden="true">‚Ä∫</span>
                <span class="current">Ï†ÄÌèâÍ∞Ä Ïö∞ÎüâÏ£º</span>
            </nav>
            <a href="#" class="back-link" onclick="showPage('home'); return false;" aria-label="ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞">
                <span aria-hidden="true">‚Üê</span> ÌôàÏúºÎ°ú
            </a>
            <header class="page-header">
                <div class="title-row">
                    <span class="icon">üíé</span>
                    <h1>Ï†ÄÌèâÍ∞Ä Ïö∞ÎüâÏ£º</h1>
                    <span class="badge badge-info">Í∞ÄÏπòÌà¨Ïûê</span>
                </div>
                <p class="desc">TTM(ÏµúÍ∑º12Í∞úÏõî) Í∏∞Î∞ò Ï†ÄÌèâÍ∞Ä Ïö∞ÎüâÏ£º Ïä§ÌÅ¨Î¶¨Îãù (FnGuide Î∂ÑÍ∏∞Îç∞Ïù¥ÌÑ∞)</p>
                <div class="meta">
                    <span class="date" id="value-stocks-date">Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: -</span>
                    <span><span class="count" id="value-stocks-count">-</span>Í∞ú Ï¢ÖÎ™©</span>
                </div>
            </header>
            <div class="card table-card">
                <div class="table-wrapper">
                    <table id="value-stocks-table" role="table" aria-label="Ï†ÄÌèâÍ∞Ä Ïö∞ÎüâÏ£º Î™©Î°ù"><thead></thead><tbody></tbody></table>
                </div>
                <div id="value-stocks-mobile" class="mobile-card-list"></div>
                <div id="value-stocks-pagination" class="pagination" role="navigation" aria-label="ÌéòÏù¥ÏßÄ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"></div>
            </div>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- Chart Modal -->
    <div id="chart-modal" class="modal-overlay" onclick="if(event.target===this)closeModal()" role="dialog" aria-modal="true" aria-labelledby="modal-name">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-stock-info">
                    <div><span id="modal-name"></span><span id="modal-ticker" class="ticker"></span></div>
                    <div class="price-row">
                        <span id="modal-price" class="price"></span>
                        <span id="modal-change"></span>
                    </div>
                </div>
                <button class="modal-close" onclick="closeModal()" aria-label="Ï∞®Ìä∏ Îã´Í∏∞">&times;</button>
            </div>
            <div class="modal-body">
                <div id="chart-container" class="chart-container">
                    <div id="chart-loading" class="chart-loading">Ï∞®Ìä∏ Î°úÎî© Ï§ë...</div>
                </div>
                <div class="chart-legend">
                    <span><span style="color:#FF69B4">‚óè</span> 5ÏùºÏÑ†</span>
                    <span><span style="color:#4A90E2">‚óè</span> 20ÏùºÏÑ†</span>
                    <span><span style="color:#E74C3C">‚óè</span> 40ÏùºÏÑ†</span>
                    <span><span style="color:#95A5A6">‚óè</span> 150ÏùºÏÑ†</span>
                </div>
            </div>
            <div class="modal-footer">
                <span>Îç∞Ïù¥ÌÑ∞: KRX (ÌïúÍµ≠Í±∞ÎûòÏÜå) ¬∑ ÏàòÏ†ïÏ£ºÍ∞Ä Í∏∞Ï§Ä</span>
                <span>ESC ÎòêÎäî Î∞îÍπ• ÏòÅÏó≠ ÌÅ¥Î¶≠ÏúºÎ°ú Îã´Í∏∞</span>
            </div>
        </div>
    </div>

    <!-- Lightweight Charts CDN -->
    <script src="https://unpkg.com/lightweight-charts@5.0.0/dist/lightweight-charts.standalone.production.js"></script>

    <script>
        // ============================================================
        // ÎèôÏ†Å Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏãúÏä§ÌÖú
        // GitHub PagesÏóêÏÑú Ïô∏Î∂Ä JSON ÌååÏùº Î°úÎìú
        // ============================================================

        // Îπà DATA Í∞ùÏ≤¥ - Î°úÎìú Ïãú Ï±ÑÏõåÏßê
        let DATA = {
            boxRange: { meta: { lastUpdated: null, totalCount: 0 }, data: [] },
            boxBreakout: { meta: { lastUpdated: null, totalCount: 0 }, data: [] },
            boxBreakoutSimple: { meta: { lastUpdated: null, totalCount: 0 }, data: [] },
            pullback: { meta: { lastUpdated: null, totalCount: 0 }, data: [] },
            volumeDryUp: { meta: { lastUpdated: null, totalCount: 0 }, data: [] },
            volumeExplosion: { meta: { lastUpdated: null, totalCount: 0 }, data: [] },
            newHigh52w: { meta: { lastUpdated: null, totalCount: 0 }, data: [] },
            sectorStage: { meta: { lastUpdated: null, totalCount: 0 }, data: [] },
            valueStocks: { meta: { updated_at: null, total_count: 0 }, data: [] }
        };

        // Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏÉÅÌÉú
        let dataLoaded = false;
        let dataLoadError = null;

        // JSON ÌååÏùº Îß§Ìïë
        const DATA_FILES = {
            boxRange: 'box_range.json',
            boxBreakout: 'box_breakout.json',
            boxBreakoutSimple: 'box_breakout_simple.json',
            pullback: 'pullback.json',
            volumeDryUp: 'volume_dry_up.json',
            volumeExplosion: 'volume_explosion.json',
            newHigh52w: 'new_high_52w.json',
            sectorStage: 'sector_stage.json',
            valueStocks: 'value_stocks.json'
        };

        // Îç∞Ïù¥ÌÑ∞ Í≤ΩÎ°ú ÌõÑÎ≥¥ (GitHub Pages, Î°úÏª¨ Îì± Îã§ÏñëÌïú ÌôòÍ≤Ω ÏßÄÏõê)
        const DATA_PATH_CANDIDATES = [
            './data/',           // GitHub Pages Í∏∞Î≥∏ Í≤ΩÎ°ú
            'data/',             // ÏÉÅÎåÄ Í≤ΩÎ°ú
            '../data/',          // ÏÉÅÏúÑ Ìè¥Îçî
            '/stock-screener-kr/data/',  // GitHub Pages repo Í≤ΩÎ°ú
            'web/public/data/'   // Î°úÏª¨ Í∞úÎ∞ú Í≤ΩÎ°ú
        ];

        // Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ìï®Ïàò
        async function loadAllData() {
            console.log('üìä Ïä§ÌÅ¨Î¶¨ÎÑà Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏãúÏûë...');

            // Î°úÎî© UI ÌëúÏãú
            showLoadingState();

            // ÏûëÎèôÌïòÎäî Í≤ΩÎ°ú Ï∞æÍ∏∞
            let workingPath = null;

            for (const basePath of DATA_PATH_CANDIDATES) {
                try {
                    const testUrl = basePath + 'box_range.json';
                    const res = await fetch(testUrl);
                    if (res.ok) {
                        workingPath = basePath;
                        console.log(`‚úÖ Îç∞Ïù¥ÌÑ∞ Í≤ΩÎ°ú Î∞úÍ≤¨: ${basePath}`);
                        break;
                    }
                } catch (e) {
                    // Îã§Ïùå Í≤ΩÎ°ú ÏãúÎèÑ
                }
            }

            if (!workingPath) {
                console.error('‚ùå Îç∞Ïù¥ÌÑ∞ ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                dataLoadError = 'Îç∞Ïù¥ÌÑ∞ ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§. Ïä§ÌÅ¨Î¶¨ÎÑàÎ•º Î®ºÏ†Ä Ïã§ÌñâÌï¥Ï£ºÏÑ∏Ïöî.';
                showErrorState(dataLoadError);
                return false;
            }

            // Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÌååÏùº Î≥ëÎ†¨ Î°úÎìú
            const loadPromises = Object.entries(DATA_FILES).map(async ([key, filename]) => {
                try {
                    const res = await fetch(workingPath + filename);
                    if (res.ok) {
                        const json = await res.json();
                        DATA[key] = json;
                        console.log(`  ‚úì ${key}: ${json.data?.length || 0}Í∞ú Ï¢ÖÎ™©`);
                    } else {
                        console.warn(`  ‚ö† ${key}: ÌååÏùº ÏóÜÏùå (${filename})`);
                    }
                } catch (e) {
                    console.warn(`  ‚ö† ${key}: Î°úÎìú Ïã§Ìå® - ${e.message}`);
                }
            });

            await Promise.all(loadPromises);

            dataLoaded = true;
            console.log('‚úÖ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏôÑÎ£å');

            return true;
        }

        // Î°úÎî© ÏÉÅÌÉú UI
        function showLoadingState() {
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'data-loading-indicator';
            loadingDiv.setAttribute('role', 'alert');
            loadingDiv.setAttribute('aria-live', 'polite');
            loadingDiv.setAttribute('aria-busy', 'true');
            loadingDiv.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:40px 60px;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,0.15);z-index:9999;text-align:center;';
            loadingDiv.innerHTML = `
                <div style="width:48px;height:48px;border:4px solid #E5E8EB;border-top-color:#0066CC;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 20px;" aria-hidden="true"></div>
                <div style="font-size:18px;font-weight:600;color:#1E2329;margin-bottom:8px;">Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë...</div>
                <div style="font-size:14px;color:#718096;">Ïä§ÌÅ¨Î¶¨ÎÑà Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Í≥† ÏûàÏäµÎãàÎã§</div>
                <div class="sr-only">Ïû†ÏãúÎßå Í∏∞Îã§Î†§ Ï£ºÏÑ∏Ïöî. Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Í≥† ÏûàÏäµÎãàÎã§.</div>
            `;
            document.body.appendChild(loadingDiv);
        }

        function hideLoadingState() {
            const loading = document.getElementById('data-loading-indicator');
            if (loading) loading.remove();
        }

        function showErrorState(message) {
            hideLoadingState();
            const errorDiv = document.createElement('div');
            errorDiv.setAttribute('role', 'alert');
            errorDiv.setAttribute('aria-live', 'assertive');
            errorDiv.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:40px 60px;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,0.15);z-index:9999;text-align:center;max-width:500px;';
            errorDiv.innerHTML = `
                <div style="font-size:48px;margin-bottom:16px;" aria-hidden="true">‚ö†Ô∏è</div>
                <div style="font-size:18px;font-weight:600;color:#1E2329;margin-bottom:12px;">Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§</div>
                <div style="font-size:14px;color:#5E6673;line-height:1.6;margin-bottom:8px;">${message}</div>
                <div style="font-size:13px;color:#8B95A1;line-height:1.5;padding:12px;background:#F8F9FA;border-radius:8px;margin-top:16px;text-align:left;">
                    <strong style="display:block;margin-bottom:8px;color:#5E6673;">Ìï¥Í≤∞ Î∞©Î≤ï:</strong>
                    1. Ïä§ÌÅ¨Î¶¨ÎÑàÎ•º Î®ºÏ†Ä Ïã§ÌñâÌïòÏÑ∏Ïöî: <code style="background:#E5E8EB;padding:2px 6px;border-radius:4px;font-size:12px;">python run_screeners.py</code><br>
                    2. Îç∞Ïù¥ÌÑ∞ Ìè¥Îçî Í≤ΩÎ°úÎ•º ÌôïÏù∏ÌïòÏÑ∏Ïöî<br>
                    3. Î∏åÎùºÏö∞Ï†ÄÎ•º ÏÉàÎ°úÍ≥†Ïπ®ÌïòÏÑ∏Ïöî
                </div>
                <button onclick="location.reload()" style="margin-top:20px;padding:12px 28px;background:#0066CC;color:white;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:background 0.15s;" onmouseover="this.style.background='#004499'" onmouseout="this.style.background='#0066CC'">ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ®</button>
            `;
            document.body.appendChild(errorDiv);
        }

        // Toast notification system
        function showToast(title, message, duration = 3000) {
            const container = document.getElementById('toast-container');
            if (!container) return;

            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <div class="toast-icon" aria-hidden="true">‚úì</div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()" aria-label="ÏïåÎ¶º Îã´Í∏∞">&times;</button>
            `;

            container.appendChild(toast);

            // Trigger animation
            setTimeout(() => toast.classList.add('show'), 10);

            // Auto remove
            setTimeout(() => {
                toast.classList.add('hide');
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }

        // Ïä§ÌîºÎÑà Ïï†ÎãàÎ©îÏù¥ÏÖò Ïä§ÌÉÄÏùº Ï∂îÍ∞Ä
        const spinStyle = document.createElement('style');
        spinStyle.textContent = '@keyframes spin { to { transform: rotate(360deg); } }';
        document.head.appendChild(spinStyle);

        // ============================================================
        // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Íµ¨Ï°∞ (Ïù¥Ï†ú ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê®)
        // ÏïÑÎûò Ï£ºÏÑùÏùÄ ÏõêÎ≥∏ Ïù∏ÎùºÏù∏ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎçò ÏûêÎ¶¨ÏûÖÎãàÎã§
        // ============================================================

        // Ïù∏ÎùºÏù∏ Îç∞Ïù¥ÌÑ∞ Ï†úÍ±∞Îê® - Ïô∏Î∂Ä JSON ÌååÏùºÏóêÏÑú Î°úÎìúÌï©ÎãàÎã§
        // Îç∞Ïù¥ÌÑ∞ Î°úÎî©ÏùÄ loadAllData() Ìï®ÏàòÏóêÏÑú Ï≤òÎ¶¨

        const screeners = [
            { id: 'box-range', icon: 'üì¶', title: 'Î∞ïÏä§Í∂å Ïä§ÌÅ¨Î¶¨ÎÑà', desc: '60Í±∞ÎûòÏùº Ïù¥ÏÉÅ Ìö°Î≥¥ Ï§ëÏù∏ Ï¢ÖÎ™©', badge: { text: 'Í∏∞Ï¥à', type: 'info' } },
            { id: 'box-breakout', icon: 'üöÄ', title: 'Î∞ïÏä§Í∂å ÎèåÌåå (Í±∞ÎûòÎüâ ÎèôÎ∞ò)', desc: 'Í±∞ÎûòÎüâ 2Î∞∞ ÎèôÎ∞ò Ï†ÄÌï≠ÏÑ† ÎèåÌåå', badge: { text: '1Ï∞® Îß§Ïàò', type: 'success' } },
            { id: 'box-breakout-simple', icon: 'üìà', title: 'Î∞ïÏä§Í∂å ÎèåÌåå (Í±∞ÎûòÎüâ Î¨¥Í¥Ä)', desc: 'Í±∞ÎûòÎüâ Î¨¥Í¥Ä ÎèåÌåå ÌõÑ 10Ïùº Ïù¥ÎÇ¥' },
            { id: 'pullback', icon: 'üéØ', title: 'ÌíÄÎ∞± Ïä§ÌÅ¨Î¶¨ÎÑà', desc: 'ÎèåÌåå ÌõÑ ÎêòÎèåÎ¶º Ï¢ÖÎ™©', badge: { text: '2Ï∞® Îß§Ïàò', type: 'success' } },
            { id: 'volume-dry-up', icon: 'üèúÔ∏è', title: 'Í±∞ÎûòÎüâ Í∏âÍ∞ê ÎàåÎ¶ºÎ™©', desc: '3Î∞∞ Í±∞ÎûòÎüâ+8% ÏñëÎ¥â ÌõÑ 10ÏùºÎÇ¥', badge: { text: 'ÏÑ∏Î†• Î≥¥Ïú†', type: 'warning' } },
            { id: 'volume-explosion', icon: 'üí•', title: 'Í±∞ÎûòÎüâ Ìè≠Î∞ú', desc: '40Ïùº ÌèâÍ∑† 6Î∞∞+6% ÏñëÎ¥â', badge: { text: 'ÎãπÏùº', type: 'danger' } },
            { id: 'new-high-52w', icon: 'üèîÔ∏è', title: '52Ï£º Ïã†Í≥†Í∞Ä ÎèåÌåå', desc: 'Ïã†Í≥†Í∞Ä ÎèåÌåå ÌõÑ 8Í±∞ÎûòÏùº Ïù¥ÎÇ¥', badge: { text: 'Ïã†Í≥†Í∞Ä', type: 'success' } },
            { id: 'value-stocks', icon: 'üíé', title: 'Ï†ÄÌèâÍ∞Ä Ïö∞ÎüâÏ£º', desc: 'PER/PBR/Î∞∞Îãπ Í∏∞Î∞ò Í∞ÄÏπòÌà¨Ïûê', badge: { text: 'Í∞ÄÏπòÌà¨Ïûê', type: 'info' } },
            { id: 'sector-stage', icon: 'üè≠', title: 'ÏóÖÏ¢ÖÎ≥Ñ 4Îã®Í≥Ñ', desc: 'ÏóÖÏ¢Ö Ï∂îÏÑ∏ Î∂ÑÏÑù' }
        ];

        // Utils
        const formatNumber = n => n.toLocaleString('ko-KR');
        const formatPercent = n => (n >= 0 ? '+' : '') + n.toFixed(2) + '%';
        const getColor = n => n > 0 ? 'positive' : n < 0 ? 'negative' : 'neutral';
        const formatShortDate = d => { const date = new Date(d); return (date.getMonth()+1) + 'Ïõî ' + date.getDate() + 'Ïùº'; };
        const formatMarketCap = cap => { if (!cap) return '-'; if (cap >= 10000) return (cap / 10000).toFixed(1) + 'Ï°∞'; return formatNumber(cap) + 'Ïñµ'; };

        // Chart data cache
        let chartDataCache = null;
        let chartInstance = null;

        // Load chart data
        async function loadChartData() {
            if (chartDataCache) return chartDataCache;
            try {
                // Try loading from various paths (GitHub Pages, local dev)
                const paths = [
                    './data/chart_data.json',
                    'data/chart_data.json',
                    '/stock-screener-kr/data/chart_data.json',
                    'chart_data.json',
                    './chart_data.json',
                    'web/public/data/chart_data.json'
                ];
                for (const path of paths) {
                    try {
                        const res = await fetch(path);
                        if (res.ok) {
                            chartDataCache = await res.json();
                            console.log(`‚úì Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞ Î°úÎìú: ${path}`);
                            return chartDataCache;
                        }
                    } catch (e) { /* try next */ }
                }
                console.warn('‚ö† Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                return null;
            } catch (e) {
                console.error('Chart data load error:', e);
                return null;
            }
        }

        // Sort state for each table
        const sortState = {};

        // Filter state for each screener
        const filterMA150State = {
            boxRange: false,
            boxBreakout: false,
            boxBreakoutSimple: false,
            pullback: false,
            volumeDryUp: false,
            volumeExplosion: false
        };

        // Pagination state
        const ITEMS_PER_PAGE = 30;
        const paginationState = {
            boxRange: 1,
            boxBreakout: 1,
            boxBreakoutSimple: 1,
            pullback: 1,
            volumeDryUp: 1,
            volumeExplosion: 1,
            newHigh52w: 1,
            valueStocks: 1
        };

        // Pagination helper functions
        function paginate(data, page) {
            const start = (page - 1) * ITEMS_PER_PAGE;
            const end = start + ITEMS_PER_PAGE;
            return data.slice(start, end);
        }

        function getTotalPages(totalItems) {
            return Math.ceil(totalItems / ITEMS_PER_PAGE);
        }

        function goToPage(screenerId, page, renderFn) {
            paginationState[screenerId] = page;
            renderFn();
        }

        function renderPagination(containerId, screenerId, totalItems, renderFn) {
            const container = document.getElementById(containerId);
            if (!container) return;

            const totalPages = getTotalPages(totalItems);
            const currentPage = paginationState[screenerId];

            if (totalPages <= 1) {
                container.innerHTML = '';
                return;
            }

            let html = '';

            // Previous button
            html += `<button class="pagination-btn" ${currentPage === 1 ? 'disabled' : ''}
                onclick="goToPage('${screenerId}', ${currentPage - 1}, ${renderFn.name})">‚óÄ Ïù¥Ï†Ñ</button>`;

            // Page numbers
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

            if (endPage - startPage < maxVisiblePages - 1) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }

            if (startPage > 1) {
                html += `<button class="pagination-btn" onclick="goToPage('${screenerId}', 1, ${renderFn.name})">1</button>`;
                if (startPage > 2) html += `<span class="pagination-info">...</span>`;
            }

            for (let i = startPage; i <= endPage; i++) {
                html += `<button class="pagination-btn ${i === currentPage ? 'active' : ''}"
                    onclick="goToPage('${screenerId}', ${i}, ${renderFn.name})">${i}</button>`;
            }

            if (endPage < totalPages) {
                if (endPage < totalPages - 1) html += `<span class="pagination-info">...</span>`;
                html += `<button class="pagination-btn" onclick="goToPage('${screenerId}', ${totalPages}, ${renderFn.name})">${totalPages}</button>`;
            }

            // Next button
            html += `<button class="pagination-btn" ${currentPage === totalPages ? 'disabled' : ''}
                onclick="goToPage('${screenerId}', ${currentPage + 1}, ${renderFn.name})">Îã§Ïùå ‚ñ∂</button>`;

            // Page info
            const startItem = (currentPage - 1) * ITEMS_PER_PAGE + 1;
            const endItem = Math.min(currentPage * ITEMS_PER_PAGE, totalItems);
            html += `<span class="pagination-info">${startItem}-${endItem} / ${totalItems}Í∞ú</span>`;

            container.innerHTML = html;
        }

        // Button ID mapping
        const filterBtnIds = {
            boxRange: 'filter-ma150-btn',
            boxBreakout: 'filter-ma150-box-breakout',
            boxBreakoutSimple: 'filter-ma150-box-breakout-simple',
            pullback: 'filter-ma150-pullback',
            volumeDryUp: 'filter-ma150-volume-dry-up',
            volumeExplosion: 'filter-ma150-volume-explosion'
        };

        // Render function mapping
        const renderFunctions = {
            boxRange: () => renderBoxRange(),
            boxBreakout: () => renderBoxBreakout(),
            boxBreakoutSimple: () => renderBoxBreakoutSimple(),
            pullback: () => renderPullback(),
            volumeDryUp: () => renderVolumeDryUp(),
            volumeExplosion: () => renderVolumeExplosion(),
            newHigh52w: () => renderNewHigh52w(),
            valueStocks: () => renderValueStocks()
        };

        // Sync filter button visual state
        function syncFilterButton(screener) {
            const btn = document.getElementById(filterBtnIds[screener]);
            if (btn) {
                btn.classList.toggle('active', !!filterMA150State[screener]);
            }
        }

        // Toggle MA150 filter for specific screener
        function toggleMA150Filter(screener = 'boxRange') {
            filterMA150State[screener] = !filterMA150State[screener];
            paginationState[screener] = 1; // Reset pagination when filter changes
            const btn = document.getElementById(filterBtnIds[screener]);
            if (btn) {
                btn.classList.toggle('active', filterMA150State[screener]);
                btn.setAttribute('aria-pressed', filterMA150State[screener] ? 'true' : 'false');
            }
            renderFunctions[screener]();

            // Show feedback toast
            const filterStatus = filterMA150State[screener] ? 'ÌôúÏÑ±Ìôî' : 'ÎπÑÌôúÏÑ±Ìôî';
            showToast('ÌïÑÌÑ∞ Î≥ÄÍ≤Ω', `150ÏùºÏÑ† ÏúÑ ÌïÑÌÑ∞Í∞Ä ${filterStatus}ÎêòÏóàÏäµÎãàÎã§`, 2000);
        }

        // Sort data
        function sortData(data, key, direction) {
            if (!key || !direction) return data;
            return [...data].sort((a, b) => {
                const aVal = a[key];
                const bVal = b[key];
                if (aVal == null && bVal == null) return 0;
                if (aVal == null) return 1;
                if (bVal == null) return -1;
                if (typeof aVal === 'number' && typeof bVal === 'number') {
                    return direction === 'asc' ? aVal - bVal : bVal - aVal;
                }
                const aStr = String(aVal), bStr = String(bVal);
                return direction === 'asc' ? aStr.localeCompare(bStr, 'ko') : bStr.localeCompare(aStr, 'ko');
            });
        }

        // Get sort icon
        function getSortIcon(tableId, key) {
            const state = sortState[tableId];
            if (!state || state.key !== key) return '‚áÖ';
            return state.direction === 'asc' ? '‚ñ≤' : '‚ñº';
        }

        // Handle sort click
        // Map tableId to screenerId for pagination reset
        const tableToScreener = {
            'box-range-table': 'boxRange',
            'box-breakout-table': 'boxBreakout',
            'box-breakout-simple-table': 'boxBreakoutSimple',
            'pullback-table': 'pullback',
            'volume-dry-up-table': 'volumeDryUp',
            'volume-explosion-table': 'volumeExplosion',
            'new-high-52w-table': 'newHigh52w',
            'value-stocks-table': 'valueStocks'
        };

        function handleSort(tableId, key, renderFn) {
            const state = sortState[tableId] || { key: null, direction: null };
            if (state.key === key) {
                if (state.direction === 'asc') state.direction = 'desc';
                else if (state.direction === 'desc') { state.key = null; state.direction = null; }
                else state.direction = 'asc';
            } else {
                state.key = key;
                state.direction = 'asc';
            }
            sortState[tableId] = state;
            // Reset pagination when sort changes
            const screenerId = tableToScreener[tableId];
            if (screenerId) paginationState[screenerId] = 1;
            renderFn();
        }

        // Open chart modal
        async function openChartModal(stock) {
            const modal = document.getElementById('chart-modal');
            document.getElementById('modal-name').textContent = stock.name;
            document.getElementById('modal-ticker').textContent = stock.ticker;
            document.getElementById('modal-price').textContent = formatNumber(stock.price) + 'Ïõê';
            const changeEl = document.getElementById('modal-change');
            changeEl.textContent = formatPercent(stock.change_rate);
            changeEl.className = getColor(stock.change_rate);

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';

            // Focus trap - move focus to close button
            setTimeout(() => {
                const closeBtn = modal.querySelector('.modal-close');
                if (closeBtn) closeBtn.focus();
            }, 100);

            const container = document.getElementById('chart-container');
            container.innerHTML = '<div class="chart-loading">Ï∞®Ìä∏ Î°úÎî© Ï§ë...</div>';

            if (chartInstance) {
                chartInstance.remove();
                chartInstance = null;
            }

            // Load and render chart
            const chartData = await loadChartData();
            const stockData = chartData ? chartData[stock.ticker] : null;

            if (!stockData || stockData.length === 0) {
                container.innerHTML = '<div class="chart-loading">Ï∞®Ìä∏ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§<br><small style="margin-top:8px;display:block;color:#8B95A1">Ìï¥Îãπ Ï¢ÖÎ™©Ïùò Í≥ºÍ±∞ Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§</small></div>';
                return;
            }

            // Create chart - Light theme
            container.innerHTML = '';
            chartInstance = LightweightCharts.createChart(container, {
                width: container.clientWidth,
                height: 400,
                layout: { background: { type: 'solid', color: '#FAFBFC' }, textColor: '#5E6673' },
                grid: { vertLines: { color: '#E5E8EB' }, horzLines: { color: '#E5E8EB' } },
                crosshair: { mode: 1 },
                rightPriceScale: { borderColor: '#E5E8EB' },
                timeScale: { borderColor: '#E5E8EB', timeVisible: false }
            });

            // Candlestick (v5 API) - Korean style: Red up, Blue down
            const candleSeries = chartInstance.addSeries(LightweightCharts.CandlestickSeries, {
                upColor: '#E31B1B', downColor: '#1261C4',
                borderUpColor: '#E31B1B', borderDownColor: '#1261C4',
                wickUpColor: '#E31B1B', wickDownColor: '#1261C4'
            });
            candleSeries.setData(stockData.map(d => ({
                time: d.date, open: d.open, high: d.high, low: d.low, close: d.close
            })));

            // Moving averages
            const maColors = { 5: '#FF69B4', 20: '#4A90E2', 40: '#E74C3C', 150: '#95A5A6' };
            [5, 20, 40, 150].forEach(period => {
                if (stockData.length >= period) {
                    const maData = [];
                    for (let i = period - 1; i < stockData.length; i++) {
                        let sum = 0;
                        for (let j = 0; j < period; j++) sum += stockData[i - j].close;
                        maData.push({ time: stockData[i].date, value: sum / period });
                    }
                    const maSeries = chartInstance.addSeries(LightweightCharts.LineSeries, {
                        color: maColors[period], lineWidth: 1, priceLineVisible: false, lastValueVisible: false
                    });
                    maSeries.setData(maData);
                }
            });

            // Volume (v5 API) - Korean style colors
            const volumeSeries = chartInstance.addSeries(LightweightCharts.HistogramSeries, {
                color: 'rgba(139, 149, 161, 0.4)', priceFormat: { type: 'volume' }, priceScaleId: ''
            });
            volumeSeries.priceScale().applyOptions({ scaleMargins: { top: 0.8, bottom: 0 } });
            volumeSeries.setData(stockData.map((d, i) => ({
                time: d.date, value: d.volume,
                color: i === 0 ? 'rgba(139, 149, 161, 0.4)' :
                       d.close >= stockData[i-1].close ? 'rgba(227, 27, 27, 0.4)' : 'rgba(18, 97, 196, 0.4)'
            })));

            chartInstance.timeScale().fitContent();

            // Resize handler
            const resizeHandler = () => {
                if (chartInstance) chartInstance.applyOptions({ width: container.clientWidth });
            };
            window.addEventListener('resize', resizeHandler);
            chartInstance._resizeHandler = resizeHandler;
        }

        // Close modal
        function closeModal() {
            const modal = document.getElementById('chart-modal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
            if (chartInstance) {
                if (chartInstance._resizeHandler) window.removeEventListener('resize', chartInstance._resizeHandler);
                chartInstance.remove();
                chartInstance = null;
            }
        }

        // ESC key handler
        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

        // Date formatting function
        function formatDateFromISO(isoString) {
            if (!isoString) return '-';
            try {
                const date = new Date(isoString);
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();
                return `${year}ÎÖÑ ${month}Ïõî ${day}Ïùº`;
            } catch {
                return '-';
            }
        }

        // Update all page dates from meta.lastUpdated
        function updatePageDates() {
            const dateMapping = {
                'box-range-date': DATA.boxRange?.meta?.lastUpdated,
                'box-breakout-date': DATA.boxBreakout?.meta?.lastUpdated,
                'box-breakout-simple-date': DATA.boxBreakoutSimple?.meta?.lastUpdated,
                'pullback-date': DATA.pullback?.meta?.lastUpdated,
                'volume-dry-up-date': DATA.volumeDryUp?.meta?.lastUpdated,
                'volume-explosion-date': DATA.volumeExplosion?.meta?.lastUpdated,
                'new-high-52w-date': DATA.newHigh52w?.meta?.lastUpdated,
                'sector-stage-date': DATA.sectorStage?.meta?.lastUpdated,
                'value-stocks-date': DATA.valueStocks?.meta?.updated_at
            };

            for (const [elementId, lastUpdated] of Object.entries(dateMapping)) {
                const el = document.getElementById(elementId);
                if (el) {
                    el.textContent = `Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä: ${formatDateFromISO(lastUpdated)}`;
                }
            }
        }

        // Home
        function renderHome() {
            // Get stock counts for each screener
            const stockCounts = {
                'box-range': DATA.boxRange?.meta?.totalCount || 0,
                'box-breakout': DATA.boxBreakout?.meta?.totalCount || 0,
                'box-breakout-simple': DATA.boxBreakoutSimple?.meta?.totalCount || 0,
                'pullback': DATA.pullback?.meta?.totalCount || 0,
                'volume-dry-up': DATA.volumeDryUp?.meta?.totalCount || 0,
                'volume-explosion': DATA.volumeExplosion?.meta?.totalCount || 0,
                'new-high-52w': DATA.newHigh52w?.meta?.totalCount || 0,
                'sector-stage': DATA.sectorStage?.meta?.totalCount || 0,
                'value-stocks': DATA.valueStocks?.meta?.total_count || DATA.valueStocks?.data?.length || 0
            };

            document.getElementById('home-cards').innerHTML = screeners.map(s => `
                <div class="card screener-card" onclick="showPage('${s.id}')" role="button" tabindex="0" onkeypress="if(event.key==='Enter' || event.key===' ')showPage('${s.id}')" aria-label="${s.title} Î≥¥Í∏∞ - ${stockCounts[s.id] || 0}Í∞ú Ï¢ÖÎ™©">
                    <div class="content">
                        <div class="icon" aria-hidden="true">${s.icon}</div>
                        <div class="info">
                            <div class="title-row">
                                <h2>${s.title}</h2>
                                ${s.badge ? `<span class="badge badge-${s.badge.type}">${s.badge.text}</span>` : ''}
                            </div>
                            <p class="desc">${s.desc}</p>
                            <div class="stock-count">
                                ${stockCounts[s.id] !== undefined ? `<strong>${stockCounts[s.id]}</strong>Í∞ú Ï¢ÖÎ™© Î∞úÍµ¥` : 'Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë...'}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Tables with sorting
        function renderTable(tableId, headers, rows, renderFn) {
            const table = document.getElementById(tableId);
            const state = sortState[tableId] || {};
            table.querySelector('thead').innerHTML = '<tr>' + headers.map(h =>
                `<th class="${h.align || ''} ${state.key === h.key ? 'sorted' : ''}"
                    ${h.key ? `onclick="handleSort('${tableId}', '${h.key}', ${renderFn.name})"` : ''}>
                    ${h.label}${h.key ? `<span class="sort-icon">${getSortIcon(tableId, h.key)}</span>` : ''}
                </th>`
            ).join('') + '</tr>';
            table.querySelector('tbody').innerHTML = rows;
        }


        function renderBoxRange() {
            syncFilterButton('boxRange');
            // ÌïÑÌÑ∞ Ï†ÅÏö©
            let filteredData = DATA.boxRange.data;
            if (filterMA150State.boxRange) {
                filteredData = filteredData.filter(s => s.above_ma150 === true);
            }

            // Ïπ¥Ïö¥Ìä∏ ÌëúÏãú
            const countEl = document.getElementById('box-range-count');
            countEl.textContent = filteredData.length;

            const headers = [
                { label: 'Ï¢ÖÎ™©Î™Ö', key: 'name' }, { label: 'ÌòÑÏû¨Í∞Ä', align: 'text-right', key: 'price' },
                { label: 'Îì±ÎùΩÎ•†', align: 'text-right', key: 'change_rate' },
                { label: 'ÏãúÍ∞ÄÏ¥ùÏï°', align: 'text-right', key: 'market_cap' },
                { label: 'Î∞ïÏä§ ÏÉÅÎã®', align: 'text-right', key: 'box_high' }, { label: 'Î∞ïÏä§ ÌïòÎã®', align: 'text-right', key: 'box_low' },
                { label: 'Î≥ÄÎèôÌè≠', align: 'text-right', key: 'range_percent' }, { label: 'ÏßÄÏßÄ ÌÑ∞Ïπò', align: 'text-center', key: 'support_touches' },
                { label: 'ATRÎ∞∞Ïàò', align: 'text-right', key: 'atr_multiple' }, { label: 'Ìö°Î≥¥ Í∏∞Í∞Ñ', align: 'text-right', key: 'days' }
            ];
            const state = sortState['box-range-table'] || {};
            const sortedData = sortData(filteredData, state.key, state.direction);
            const paginatedData = paginate(sortedData, paginationState.boxRange);
            const rows = paginatedData.map(s => `
                <tr class="clickable" onclick='openChartModal(${JSON.stringify({ticker:s.ticker,name:s.name,price:s.price,change_rate:s.change_rate})})' role="button" tabindex="0" onkeypress="if(event.key==='Enter')openChartModal(${JSON.stringify({ticker:s.ticker,name:s.name,price:s.price,change_rate:s.change_rate})})">
                    <td><div class="stock-name">${s.name}</div><div class="stock-ticker">${s.ticker}</div></td>
                    <td class="text-right">${formatNumber(s.price)}Ïõê</td>
                    <td class="text-right ${getColor(s.change_rate)}">${formatPercent(s.change_rate)}</td>
                    <td class="text-right">${formatMarketCap(s.market_cap)}</td>
                    <td class="text-right">${formatNumber(s.box_high)}Ïõê</td>
                    <td class="text-right">${formatNumber(s.box_low)}Ïõê</td>
                    <td class="text-right">${formatPercent(s.range_percent)}</td>
                    <td class="text-center">${s.support_touches}/${s.resistance_touches}</td>
                    <td class="text-right">${s.atr_multiple.toFixed(1)}x</td>
                    <td class="text-right">${s.days || 60}Ïùº</td>
                </tr>
            `).join('');
            renderTable('box-range-table', headers, rows, renderBoxRange);

            // Mobile card view
            const mobileContainer = document.getElementById('box-range-mobile');
            if (mobileContainer) {
                mobileContainer.innerHTML = paginatedData.map(s => `
                    <div class="stock-card-mobile" onclick='openChartModal(${JSON.stringify({ticker:s.ticker,name:s.name,price:s.price,change_rate:s.change_rate})})' role="button" tabindex="0" aria-label="${s.name} Ï∞®Ìä∏ Î≥¥Í∏∞">
                        <div class="header-row">
                            <div class="stock-info">
                                <h3>${s.name}</h3>
                                <div class="ticker">${s.ticker}</div>
                            </div>
                            <div class="price-info">
                                <div class="price">${formatNumber(s.price)}Ïõê</div>
                                <div class="${getColor(s.change_rate)}">${formatPercent(s.change_rate)}</div>
                            </div>
                        </div>
                        <div class="details">
                            <div class="detail-item">
                                <div class="detail-label">ÏãúÍ∞ÄÏ¥ùÏï°</div>
                                <div class="detail-value">${formatMarketCap(s.market_cap)}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Î≥ÄÎèôÌè≠</div>
                                <div class="detail-value">${formatPercent(s.range_percent)}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ÏßÄÏßÄ/Ï†ÄÌï≠ ÌÑ∞Ïπò</div>
                                <div class="detail-value">${s.support_touches}/${s.resistance_touches}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ìö°Î≥¥ Í∏∞Í∞Ñ</div>
                                <div class="detail-value">${s.days || 60}Ïùº</div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            renderPagination('box-range-pagination', 'boxRange', sortedData.length, renderBoxRange);
        }

        function renderBoxBreakout() {
            syncFilterButton('boxBreakout');
            // ÌïÑÌÑ∞ Ï†ÅÏö©
            let filteredData = DATA.boxBreakout.data;
            if (filterMA150State.boxBreakout) {
                filteredData = filteredData.filter(s => s.above_ma150 === true);
            }

            const countEl = document.getElementById('box-breakout-count');
            if (filterMA150State.boxBreakout) {
                countEl.textContent = filteredData.length + 'Í∞ú / Ï†ÑÏ≤¥ ' + DATA.boxBreakout.meta.totalCount;
            } else {
                countEl.textContent = DATA.boxBreakout.meta.totalCount;
            }

            const headers = [
                { label: 'Ï¢ÖÎ™©Î™Ö', key: 'name' }, { label: 'ÌòÑÏû¨Í∞Ä', align: 'text-right', key: 'price' },
                { label: 'Îì±ÎùΩÎ•†', align: 'text-right', key: 'change_rate' }, { label: 'ÏãúÍ∞ÄÏ¥ùÏï°', align: 'text-right', key: 'market_cap' },
                { label: 'ÎèåÌååÏùº', key: 'breakout_date' }, { label: 'ÎèåÌååÍ∞Ä', align: 'text-right', key: 'breakout_price' },
                { label: 'Ï†ÄÌï≠ÏÑ†ÎåÄÎπÑ', align: 'text-right', key: 'breakout_pct' }, { label: 'Í±∞ÎûòÎüâÎπÑ', align: 'text-right', key: 'volume_ratio' }, { label: '150ÏùºÏÑ†', align: 'text-right', key: 'ma150' }
            ];
            const state = sortState['box-breakout-table'] || {};
            const sortedData = sortData(filteredData, state.key, state.direction);
            const paginatedData = paginate(sortedData, paginationState.boxBreakout);
            const rows = paginatedData.map(s => `
                <tr class="clickable" onclick='openChartModal(${JSON.stringify({ticker:s.ticker,name:s.name,price:s.price,change_rate:s.change_rate})})'>
                    <td><div class="stock-name">${s.name}</div><div class="stock-ticker">${s.ticker}</div></td>
                    <td class="text-right">${formatNumber(s.price)}Ïõê</td>
                    <td class="text-right ${getColor(s.change_rate)}">${formatPercent(s.change_rate)}</td>
                    <td class="text-right">${formatMarketCap(s.market_cap)}</td>
                    <td>${formatShortDate(s.breakout_date)}</td>
                    <td class="text-right">${formatNumber(s.breakout_price)}Ïõê</td>
                    <td class="text-right ${getColor(s.breakout_pct)}">${s.breakout_pct != null ? formatPercent(s.breakout_pct) : '-'}</td>
                    <td class="text-right">${s.volume_ratio.toFixed(1)}x</td>
                    <td class="text-right">${formatNumber(s.ma150)}Ïõê</td>
                </tr>
            `).join('');
            renderTable('box-breakout-table', headers, rows, renderBoxBreakout);
            renderPagination('box-breakout-pagination', 'boxBreakout', sortedData.length, renderBoxBreakout);
        }

        function renderBoxBreakoutSimple() {
            syncFilterButton('boxBreakoutSimple');
            // ÌïÑÌÑ∞ Ï†ÅÏö©
            let filteredData = DATA.boxBreakoutSimple.data;
            if (filterMA150State.boxBreakoutSimple) {
                filteredData = filteredData.filter(s => s.above_ma150 === true);
            }

            const countEl = document.getElementById('box-breakout-simple-count');
            if (filterMA150State.boxBreakoutSimple) {
                countEl.textContent = filteredData.length + 'Í∞ú / Ï†ÑÏ≤¥ ' + DATA.boxBreakoutSimple.meta.totalCount;
            } else {
                countEl.textContent = DATA.boxBreakoutSimple.meta.totalCount;
            }

            const headers = [
                { label: 'Ï¢ÖÎ™©Î™Ö', key: 'name' }, { label: 'ÌòÑÏû¨Í∞Ä', align: 'text-right', key: 'price' },
                { label: 'Îì±ÎùΩÎ•†', align: 'text-right', key: 'change_rate' }, { label: 'ÏãúÍ∞ÄÏ¥ùÏï°', align: 'text-right', key: 'market_cap' },
                { label: 'ÎèåÌååÏùº', key: 'breakout_date' }, { label: 'Ï†ÄÌï≠ÏÑ†', align: 'text-right', key: 'resistance' },
                { label: 'Í≤ΩÍ≥ºÏùº', align: 'text-right', key: 'days_since_breakout' }, { label: 'Ï†ÄÌï≠ÏÑ†ÎåÄÎπÑ', align: 'text-right', key: 'breakout_pct' }
            ];
            const state = sortState['box-breakout-simple-table'] || {};
            const sortedData = sortData(filteredData, state.key, state.direction);
            const paginatedData = paginate(sortedData, paginationState.boxBreakoutSimple);
            const rows = paginatedData.map(s => `
                <tr class="clickable" onclick='openChartModal(${JSON.stringify({ticker:s.ticker,name:s.name,price:s.price,change_rate:s.change_rate})})'>
                    <td><div class="stock-name">${s.name}</div><div class="stock-ticker">${s.ticker}</div></td>
                    <td class="text-right">${formatNumber(s.price)}Ïõê</td>
                    <td class="text-right ${getColor(s.change_rate)}">${formatPercent(s.change_rate)}</td>
                    <td class="text-right">${formatMarketCap(s.market_cap)}</td>
                    <td>${formatShortDate(s.breakout_date)}</td>
                    <td class="text-right">${formatNumber(s.resistance)}Ïõê</td>
                    <td class="text-right">${s.days_since_breakout}Ïùº</td>
                    <td class="text-right ${getColor(s.breakout_pct)}">${s.breakout_pct != null ? formatPercent(s.breakout_pct) : '-'}</td>
                </tr>
            `).join('');
            renderTable('box-breakout-simple-table', headers, rows, renderBoxBreakoutSimple);
            renderPagination('box-breakout-simple-pagination', 'boxBreakoutSimple', sortedData.length, renderBoxBreakoutSimple);
        }

        function renderPullback() {
            syncFilterButton('pullback');
            // ÌïÑÌÑ∞ Ï†ÅÏö©
            let filteredData = DATA.pullback.data;
            if (filterMA150State.pullback) {
                filteredData = filteredData.filter(s => s.above_ma150 === true);
            }

            const countEl = document.getElementById('pullback-count');
            if (filterMA150State.pullback) {
                countEl.textContent = filteredData.length + 'Í∞ú / Ï†ÑÏ≤¥ ' + DATA.pullback.meta.totalCount;
            } else {
                countEl.textContent = DATA.pullback.meta.totalCount;
            }

            const headers = [
                { label: 'Ï¢ÖÎ™©Î™Ö', key: 'name' }, { label: 'ÌòÑÏû¨Í∞Ä', align: 'text-right', key: 'price' },
                { label: 'Îì±ÎùΩÎ•†', align: 'text-right', key: 'change_rate' }, { label: 'ÏãúÍ∞ÄÏ¥ùÏï°', align: 'text-right', key: 'market_cap' },
                { label: 'ÎèåÌååÏùº', key: 'breakout_date' }, { label: 'Ï†ÄÌï≠ÏÑ†', align: 'text-right', key: 'resistance' },
                { label: 'ÌíÄÎ∞±Î•†', align: 'text-right', key: 'pullback_ratio' }, { label: 'Í±∞ÎûòÎüâÍ∞êÏÜå', align: 'text-right', key: 'volume_decrease' }
            ];
            const state = sortState['pullback-table'] || {};
            const sortedData = sortData(filteredData, state.key, state.direction);
            const paginatedData = paginate(sortedData, paginationState.pullback);
            const rows = paginatedData.map(s => `
                <tr class="clickable" onclick='openChartModal(${JSON.stringify({ticker:s.ticker,name:s.name,price:s.price,change_rate:s.change_rate})})'>
                    <td><div class="stock-name">${s.name}</div><div class="stock-ticker">${s.ticker}</div></td>
                    <td class="text-right">${formatNumber(s.price)}Ïõê</td>
                    <td class="text-right ${getColor(s.change_rate)}">${formatPercent(s.change_rate)}</td>
                    <td class="text-right">${formatMarketCap(s.market_cap)}</td>
                    <td>${formatShortDate(s.breakout_date)}</td>
                    <td class="text-right">${formatNumber(s.resistance)}Ïõê</td>
                    <td class="text-right">${s.pullback_ratio.toFixed(1)}%</td>
                    <td class="text-right" style="color: var(--color-success)">-${s.volume_decrease}%</td>
                </tr>
            `).join('');
            renderTable('pullback-table', headers, rows, renderPullback);
            renderPagination('pullback-pagination', 'pullback', sortedData.length, renderPullback);
        }

        function renderVolumeDryUp() {
            syncFilterButton('volumeDryUp');
            // ÌïÑÌÑ∞ Ï†ÅÏö©
            let filteredData = DATA.volumeDryUp.data;
            if (filterMA150State.volumeDryUp) {
                filteredData = filteredData.filter(s => s.above_ma150 === true);
            }

            const countEl = document.getElementById('volume-dry-up-count');
            if (filterMA150State.volumeDryUp) {
                countEl.textContent = filteredData.length + 'Í∞ú / Ï†ÑÏ≤¥ ' + DATA.volumeDryUp.meta.totalCount;
            } else {
                countEl.textContent = DATA.volumeDryUp.meta.totalCount;
            }

            const headers = [
                { label: 'Ï¢ÖÎ™©Î™Ö', key: 'name' }, { label: 'ÌòÑÏû¨Í∞Ä', align: 'text-right', key: 'price' },
                { label: 'ÏãúÍ∞ÄÏ¥ùÏï°', align: 'text-right', key: 'market_cap' },
                { label: 'Í∏âÎì±Ïùº', key: 'explosion_date' }, { label: 'Í∏âÎì±Ìè≠', align: 'text-right', key: 'explosion_change_rate' },
                { label: 'Í±∞ÎûòÎüâÎπÑ', align: 'text-right', key: 'explosion_volume_ratio' },
                { label: 'Í≤ΩÍ≥ºÏùº', align: 'text-right', key: 'days_since_explosion' },
                { label: 'Í±∞ÎûòÎüâÍ∞êÏÜå', align: 'text-right', key: 'volume_decrease_rate' }
            ];
            const state = sortState['volume-dry-up-table'] || {};
            const sortedData = sortData(filteredData, state.key, state.direction);
            const paginatedData = paginate(sortedData, paginationState.volumeDryUp);
            const rows = paginatedData.map(s => `
                <tr class="clickable" onclick='openChartModal(${JSON.stringify({ticker:s.ticker,name:s.name,price:s.price,change_rate:s.change_rate||0})})'>
                    <td><div class="stock-name">${s.name}</div><div class="stock-ticker">${s.ticker}</div></td>
                    <td class="text-right">${formatNumber(s.price)}Ïõê</td>
                    <td class="text-right">${formatMarketCap(s.market_cap)}</td>
                    <td>${formatShortDate(s.explosion_date)}</td>
                    <td class="text-right positive">+${s.explosion_change_rate.toFixed(1)}%</td>
                    <td class="text-right" style="color: var(--color-warning)">${(s.explosion_volume_ratio || 0).toFixed(1)}x</td>
                    <td class="text-right">${s.days_since_explosion || 0}Ïùº</td>
                    <td class="text-right" style="color: var(--color-success)">-${s.volume_decrease_rate}%</td>
                </tr>
            `).join('');
            renderTable('volume-dry-up-table', headers, rows, renderVolumeDryUp);
            renderPagination('volume-dry-up-pagination', 'volumeDryUp', sortedData.length, renderVolumeDryUp);
        }

        function renderVolumeExplosion() {
            syncFilterButton('volumeExplosion');
            // ÌïÑÌÑ∞ Ï†ÅÏö©
            let filteredData = DATA.volumeExplosion.data;
            if (filterMA150State.volumeExplosion) {
                filteredData = filteredData.filter(s => s.above_ma150 === true);
            }

            const countEl = document.getElementById('volume-explosion-count');
            if (filterMA150State.volumeExplosion) {
                countEl.textContent = filteredData.length + 'Í∞ú / Ï†ÑÏ≤¥ ' + DATA.volumeExplosion.meta.totalCount;
            } else {
                countEl.textContent = DATA.volumeExplosion.meta.totalCount;
            }

            const headers = [
                { label: 'Ï¢ÖÎ™©Î™Ö', key: 'name' }, { label: 'ÌòÑÏû¨Í∞Ä', align: 'text-right', key: 'price' },
                { label: 'Îì±ÎùΩÎ•†', align: 'text-right', key: 'change_rate' }, { label: 'ÏãúÍ∞ÄÏ¥ùÏï°', align: 'text-right', key: 'market_cap' },
                { label: 'Í±∞ÎûòÎüâÎπÑ', align: 'text-right', key: 'volume_ratio' }, { label: 'ÏàúÏúÑ', align: 'text-right', key: 'volume_rank' }
            ];
            const state = sortState['volume-explosion-table'] || {};
            const sortedData = sortData(filteredData, state.key, state.direction);
            const paginatedData = paginate(sortedData, paginationState.volumeExplosion);
            const rows = paginatedData.map(s => `
                <tr class="clickable" onclick='openChartModal(${JSON.stringify({ticker:s.ticker,name:s.name,price:s.price,change_rate:s.change_rate})})'>
                    <td><div class="stock-name">${s.name}</div><div class="stock-ticker">${s.ticker}</div></td>
                    <td class="text-right">${formatNumber(s.price)}Ïõê</td>
                    <td class="text-right ${getColor(s.change_rate)}">${formatPercent(s.change_rate)}</td>
                    <td class="text-right">${formatMarketCap(s.market_cap)}</td>
                    <td class="text-right">${s.volume_ratio.toFixed(1)}x</td>
                    <td class="text-right">${s.volume_rank}ÏúÑ</td>
                </tr>
            `).join('');
            renderTable('volume-explosion-table', headers, rows, renderVolumeExplosion);
            renderPagination('volume-explosion-pagination', 'volumeExplosion', sortedData.length, renderVolumeExplosion);
        }

        function renderNewHigh52w() {
            document.getElementById('new-high-52w-count').textContent = DATA.newHigh52w.meta.totalCount;

            const headers = [
                { label: 'Ï¢ÖÎ™©Î™Ö', key: 'name' }, { label: 'ÌòÑÏû¨Í∞Ä', align: 'text-right', key: 'price' },
                { label: 'Îì±ÎùΩÎ•†', align: 'text-right', key: 'change_rate' }, { label: 'ÏãúÍ∞ÄÏ¥ùÏï°', align: 'text-right', key: 'market_cap' },
                { label: '52Ï£º Ïã†Í≥†Í∞Ä', align: 'text-right', key: 'high_52w' },
                { label: 'Ïã†Í≥†Í∞Ä ÎåÄÎπÑ', align: 'text-right', key: 'above_high_percent' },
                { label: 'Í±∞ÎûòÎüâÎπÑ', align: 'text-right', key: 'volume_ratio' },
                { label: 'ÎèåÌåå ÌõÑ', align: 'text-right', key: 'days_since' }
            ];
            const state = sortState['new-high-52w-table'] || {};
            const sortedData = sortData(DATA.newHigh52w.data, state.key, state.direction);
            const paginatedData = paginate(sortedData, paginationState.newHigh52w);
            const rows = paginatedData.map(s => `
                <tr class="clickable" onclick='openChartModal(${JSON.stringify({ticker:s.ticker,name:s.name,price:s.price,change_rate:s.change_rate})})'>
                    <td><div class="stock-name">${s.name}</div><div class="stock-ticker">${s.ticker}</div></td>
                    <td class="text-right">${formatNumber(s.price)}Ïõê</td>
                    <td class="text-right ${getColor(s.change_rate)}">${formatPercent(s.change_rate)}</td>
                    <td class="text-right">${formatMarketCap(s.market_cap)}</td>
                    <td class="text-right">${formatNumber(s.high_52w)}Ïõê</td>
                    <td class="text-right positive">+${s.above_high_percent.toFixed(1)}%</td>
                    <td class="text-right">${s.volume_ratio ? s.volume_ratio.toFixed(1) + 'x' : '-'}</td>
                    <td class="text-right">${s.days_since}Ïùº</td>
                </tr>
            `).join('');
            renderTable('new-high-52w-table', headers, rows, renderNewHigh52w);
            renderPagination('new-high-52w-pagination', 'newHigh52w', sortedData.length, renderNewHigh52w);
        }

        function renderSectorStage() {
            document.getElementById('sector-stage-count').textContent = DATA.sectorStage.meta.totalCount;
            const grouped = { 1: [], 2: [], 3: [], 4: [] };
            DATA.sectorStage.data.forEach(s => grouped[s.stage]?.push(s));
            const stageEmoji = { 1: '1Ô∏è‚É£', 2: '2Ô∏è‚É£', 3: '3Ô∏è‚É£', 4: '4Ô∏è‚É£' };
            const stageLabel = { 1: 'Í∏∞Ï¥à', 2: 'ÏÉÅÏäπ', 3: 'ÏµúÏ†ïÏÉÅ', 4: 'Ïá†Ìá¥' };
            const stageBadge = { 1: 'Ìö°Î≥¥ Íµ¨Í∞Ñ', 2: 'Îß§Ïàò Ï†ÅÍ∏∞', 3: 'Îß§ÎèÑ Ï§ÄÎπÑ', 4: 'Îß§ÎèÑ/Í¥ÄÎßù' };
            const stageBgClass = { 1: 'stage-1-bg', 2: 'stage-2-bg', 3: 'stage-3-bg', 4: 'stage-4-bg' };

            let html = '';
            [2, 1, 3, 4].forEach(stage => {
                if (grouped[stage]?.length > 0) {
                    html += `
                        <section class="sector-section">
                            <h2><span class="stage-${stage}">${stageEmoji[stage]} ${stageLabel[stage]} Îã®Í≥Ñ</span>
                            <span class="section-badge stage-${stage}-bg stage-${stage}">${stageBadge[stage]}</span></h2>
                            <div class="sector-cards">
                                ${grouped[stage].map(s => {
                                    const priceVsMa = ((s.current_price - s.ma150) / s.ma150) * 100;
                                    return `
                                        <div class="card sector-card ${stageBgClass[s.stage]}">
                                            <div class="header">
                                                <span class="sector-name">${s.sector_name}</span>
                                                <div class="stage-badge">
                                                    <span class="emoji">${stageEmoji[s.stage]}</span>
                                                    <span class="name stage-${s.stage}">${s.stage_name}</span>
                                                </div>
                                            </div>
                                            <div class="metrics">
                                                <div class="metric"><span class="metric-label">ÌòÑÏû¨ ÏßÄÏàò</span><span>${formatNumber(s.current_price)}</span></div>
                                                <div class="metric"><span class="metric-label">150ÏùºÏÑ† ÎåÄÎπÑ</span><span class="${getColor(priceVsMa)}">${formatPercent(priceVsMa)}</span></div>
                                                <div class="metric"><span class="metric-label">MA Í∏∞Ïö∏Í∏∞</span><span class="${getColor(s.ma150_slope)}">${formatPercent(s.ma150_slope)}</span></div>
                                                <div class="metric"><span class="metric-label">3Í∞úÏõî ÏàòÏùµÎ•†</span><span class="${getColor(s.return_3m)}">${formatPercent(s.return_3m)}</span></div>
                                            </div>
                                            ${s.is_overheated ? '<div class="overheated">üî• 6Í∞úÏõî Ïó∞ÏÜç ÏÉÅÏäπ - Í≥ºÏó¥ Ï£ºÏùò</div>' : ''}
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </section>
                    `;
                }
            });
            document.getElementById('sector-stage-content').innerHTML = html;
        }

        function renderValueStocks() {
            const valueData = DATA.valueStocks?.data || [];
            const dataType = DATA.valueStocks?.meta?.data_type || 'Ïó∞Í∞Ñ';
            document.getElementById('value-stocks-count').textContent = valueData.length;

            const headers = [
                { label: 'Ï¢ÖÎ™©Î™Ö', key: 'name' },
                { label: 'ÏãúÍ∞ÄÏ¥ùÏï°', align: 'text-right', key: 'market_cap' },
                { label: 'PER', align: 'text-right', key: 'per' },
                { label: 'ÏµúÍ∑ºÎ∂ÑÍ∏∞', align: 'text-center', key: 'quarters' },
                { label: 'Îß§Ï∂úÏÑ±Ïû•Î•†', align: 'text-right', key: 'revenue_growth_3y' },
                { label: 'ÏòÅÏóÖÏù¥ÏùµÎ•†', align: 'text-right', key: 'op_margin_avg' },
                { label: 'ÏòÅÏóÖÏù¥ÏùµÏÑ±Ïû•', align: 'text-right', key: 'op_growth_5y' },
                { label: 'EPSÏÑ±Ïû•', align: 'text-right', key: 'eps_growth_5y' },
                { label: 'ÏàúÏù¥ÏùµTTM', align: 'text-right', key: 'net_income_ttm' }
            ];

            const state = sortState['value-stocks-table'] || {};
            const sortedData = sortData(valueData, state.key, state.direction);
            const paginatedData = paginate(sortedData, paginationState.valueStocks);

            const rows = paginatedData.map(s => {
                const opMargin = s.op_margin_avg ?? s.op_margin_5y;
                const netIncome = s.net_income_ttm ?? s.net_income_cagr_5y;
                return `
                    <tr>
                        <td><div class="stock-name">${s.name}</div><div class="stock-ticker">${s.ticker}</div></td>
                        <td class="text-right">${formatMarketCap(s.market_cap)}</td>
                        <td class="text-right">${s.per != null ? s.per.toFixed(1) : '-'}</td>
                        <td class="text-center"><span class="badge badge-info">${s.quarters || '-'}</span></td>
                        <td class="text-right">${s.revenue_growth_3y != null ? s.revenue_growth_3y.toFixed(1) + '%' : '-'}</td>
                        <td class="text-right">${opMargin != null ? opMargin.toFixed(1) + '%' : '-'}</td>
                        <td class="text-right">${s.op_growth_5y != null ? s.op_growth_5y.toFixed(1) + '%' : '-'}</td>
                        <td class="text-right">${s.eps_growth_5y != null ? s.eps_growth_5y.toFixed(1) + '%' : '-'}</td>
                        <td class="text-right">${netIncome != null ? (netIncome / 10000).toFixed(0) + 'Ï°∞' : '-'}</td>
                    </tr>
                `;
            }).join('');

            renderTable('value-stocks-table', headers, rows, renderValueStocks);
            renderPagination('value-stocks-pagination', 'valueStocks', sortedData.length, renderValueStocks);
        }

        // Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${pageId}`).classList.add('active');
            window.scrollTo(0, 0);

            // Update page title for better navigation
            const pageTitles = {
                'home': 'Íµ≠ÎÇ¥ Ï£ºÏãù Ï¢ÖÎ™© Î∞úÍµ¥',
                'box-range': 'Î∞ïÏä§Í∂å Ïä§ÌÅ¨Î¶¨ÎÑà',
                'box-breakout': 'Î∞ïÏä§Í∂å ÎèåÌåå (Í±∞ÎûòÎüâ ÎèôÎ∞ò)',
                'box-breakout-simple': 'Î∞ïÏä§Í∂å ÎèåÌåå (Í±∞ÎûòÎüâ Î¨¥Í¥Ä)',
                'pullback': 'ÌíÄÎ∞± Ïä§ÌÅ¨Î¶¨ÎÑà',
                'volume-dry-up': 'Í±∞ÎûòÎüâ Í∏âÍ∞ê ÎàåÎ¶ºÎ™©',
                'volume-explosion': 'Í±∞ÎûòÎüâ Ìè≠Î∞ú',
                'new-high-52w': '52Ï£º Ïã†Í≥†Í∞Ä ÎèåÌåå',
                'sector-stage': 'ÏóÖÏ¢ÖÎ≥Ñ 4Îã®Í≥Ñ',
                'value-stocks': 'Ï†ÄÌèâÍ∞Ä Ïö∞ÎüâÏ£º'
            };

            const pageTitle = pageTitles[pageId] || 'Íµ≠ÎÇ¥ Ï£ºÏãù Ï¢ÖÎ™© Î∞úÍµ¥';
            document.title = `${pageTitle} - Stock Screener`;

            // Announce page change to screen readers
            const announcement = document.createElement('div');
            announcement.setAttribute('role', 'status');
            announcement.setAttribute('aria-live', 'polite');
            announcement.className = 'sr-only';
            announcement.textContent = `${pageTitle} ÌéòÏù¥ÏßÄÎ°ú Ïù¥ÎèôÌñàÏäµÎãàÎã§`;
            document.body.appendChild(announcement);
            setTimeout(() => announcement.remove(), 1000);
        }

        // Ïï± Ï¥àÍ∏∞Ìôî Ìï®Ïàò
        async function initApp() {
            // 1. Ïô∏Î∂Ä JSON Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            const success = await loadAllData();

            // 2. Î°úÎî© UI Ïà®Í∏∞Í∏∞
            hideLoadingState();

            if (!success) {
                console.error('Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå® - Ïï± Ï¥àÍ∏∞Ìôî Ï§ëÎã®');
                return;
            }

            // 3. UI Î†åÎçîÎßÅ
            renderHome();
            updatePageDates();
            renderBoxRange();
            renderBoxBreakout();
            renderBoxBreakoutSimple();
            renderPullback();
            renderVolumeDryUp();
            renderVolumeExplosion();
            renderNewHigh52w();
            renderSectorStage();
            renderValueStocks();

            console.log('‚úÖ Ïï± Ï¥àÍ∏∞Ìôî ÏôÑÎ£å');
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïï± ÏãúÏûë
        initApp();
    </script>
</body>
</html>
